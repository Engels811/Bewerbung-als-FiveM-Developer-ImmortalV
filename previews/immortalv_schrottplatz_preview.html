<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IMMORTAL V ‚Äî Schrottplatz Preview</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:        #080c14;
    --panel:     rgba(10,16,28,0.96);
    --border:    rgba(0,153,255,0.2);
    --accent:    #0099ff;
    --accent2:   #00ccff;
    --green:     #00cc66;
    --red:       #ff3333;
    --text:      #e8edf5;
    --muted:     rgba(232,237,245,0.4);
    --card-bg:   rgba(255,255,255,0.03);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'Rajdhani', sans-serif;
    background: var(--bg);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 30px 20px 60px;
    overflow-x: hidden;
    position: relative;
  }

  /* Animated background grid */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      linear-gradient(rgba(0,153,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,153,255,0.03) 1px, transparent 1px);
    background-size: 60px 60px;
    pointer-events: none;
    z-index: 0;
    animation: gridScroll 20s linear infinite;
  }

  @keyframes gridScroll {
    from { background-position: 0 0; }
    to   { background-position: 60px 60px; }
  }

  body::after {
    content: '';
    position: fixed;
    top: -200px; left: 50%;
    transform: translateX(-50%);
    width: 800px; height: 400px;
    background: radial-gradient(ellipse, rgba(0,153,255,0.08) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }

  /* Preview Label */
  .preview-label {
    position: relative;
    z-index: 10;
    margin-bottom: 24px;
    text-align: center;
  }

  .preview-label h1 {
    font-size: 36px;
    font-weight: 700;
    letter-spacing: 6px;
    color: var(--text);
  }

  .preview-label h1 span { color: var(--accent); }

  .preview-label p {
    font-size: 12px;
    letter-spacing: 3px;
    color: var(--muted);
    text-transform: uppercase;
    margin-top: 4px;
  }

  .preview-tabs {
    position: relative;
    z-index: 10;
    display: flex;
    gap: 4px;
    margin-bottom: 20px;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 6px;
    padding: 4px;
  }

  .tab-btn {
    padding: 8px 20px;
    border-radius: 4px;
    border: none;
    background: transparent;
    color: var(--muted);
    font-family: 'Rajdhani', sans-serif;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
  }

  .tab-btn.active {
    background: var(--accent);
    color: #fff;
    box-shadow: 0 0 20px rgba(0,153,255,0.4);
  }

  /* Main Window */
  .window {
    position: relative;
    z-index: 10;
    width: 960px;
    max-width: 100%;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 6px;
    box-shadow:
      0 0 0 1px rgba(0,0,0,0.5),
      0 0 60px rgba(0,100,200,0.12),
      0 40px 80px rgba(0,0,0,0.7);
    overflow: hidden;
    animation: slideUp 0.4s cubic-bezier(0.22, 1, 0.36, 1);
  }

  @keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* Window chrome */
  .titlebar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 16px;
    background: rgba(0,0,0,0.5);
    border-bottom: 1px solid rgba(255,255,255,0.04);
  }

  .titlebar-dots { display: flex; gap: 6px; }
  .dot { width: 10px; height: 10px; border-radius: 50%; }
  .dot-red   { background: #ff5f57; }
  .dot-yellow{ background: #febc2e; }
  .dot-green { background: #28c840; }

  .titlebar-title {
    font-size: 11px;
    letter-spacing: 2px;
    color: rgba(255,255,255,0.3);
    text-transform: uppercase;
    font-family: 'JetBrains Mono', monospace;
  }

  .titlebar-right { width: 52px; }

  /* Header */
  .header {
    background: rgba(0,0,0,0.35);
    border-bottom: 1px solid rgba(0,153,255,0.15);
    padding: 20px 28px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    overflow: hidden;
  }

  .header::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--accent), transparent);
    opacity: 0.4;
  }

  .logo { font-size: 26px; font-weight: 700; letter-spacing: 4px; color: #fff; }
  .logo span { color: var(--accent); }

  .logo-sub {
    font-size: 10px;
    letter-spacing: 3px;
    color: var(--muted);
    text-transform: uppercase;
    margin-top: 3px;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .header-stat {
    text-align: right;
    font-size: 11px;
    color: var(--muted);
    letter-spacing: 1px;
  }

  .header-stat strong {
    display: block;
    font-size: 18px;
    color: var(--accent);
    font-weight: 700;
    line-height: 1.2;
  }

  .close-btn {
    width: 34px; height: 34px;
    border-radius: 4px;
    border: 1px solid rgba(255,255,255,0.1);
    background: rgba(255,255,255,0.05);
    color: rgba(255,255,255,0.4);
    font-size: 14px;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
    font-family: inherit;
  }

  .close-btn:hover {
    background: rgba(255,50,50,0.15);
    border-color: rgba(255,50,50,0.3);
    color: var(--red);
  }

  /* Stats Row */
  .stats-row {
    display: flex;
    align-items: center;
    gap: 0;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    background: rgba(0,0,0,0.2);
  }

  .stat-block {
    flex: 1;
    padding: 11px 20px;
    border-right: 1px solid rgba(255,255,255,0.05);
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .stat-block:last-child { border-right: none; }

  .stat-indicator {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--accent);
    box-shadow: 0 0 8px var(--accent);
    flex-shrink: 0;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%,100% { box-shadow: 0 0 8px var(--accent); }
    50%      { box-shadow: 0 0 16px var(--accent); }
  }

  .stat-label { font-size: 11px; color: var(--muted); letter-spacing: 1px; }
  .stat-value { font-size: 14px; font-weight: 700; color: var(--text); margin-left: auto; }
  .stat-value.accent { color: var(--accent); }
  .stat-value.green  { color: var(--green); }

  /* Toolbar */
  .toolbar {
    padding: 12px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .search-wrap {
    flex: 1;
    position: relative;
  }

  .search-icon {
    position: absolute;
    left: 12px; top: 50%;
    transform: translateY(-50%);
    color: var(--muted);
    font-size: 13px;
    pointer-events: none;
  }

  .search-input {
    width: 100%;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 4px;
    padding: 9px 12px 9px 36px;
    color: var(--text);
    font-family: 'Rajdhani', sans-serif;
    font-size: 14px;
    font-weight: 500;
    outline: none;
    transition: border-color 0.2s;
  }

  .search-input::placeholder { color: rgba(255,255,255,0.2); }
  .search-input:focus { border-color: rgba(0,153,255,0.4); }

  .filter-btn {
    padding: 9px 16px;
    border-radius: 4px;
    border: 1px solid rgba(255,255,255,0.08);
    background: rgba(255,255,255,0.04);
    color: var(--muted);
    font-family: 'Rajdhani', sans-serif;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .filter-btn.active, .filter-btn:hover {
    border-color: rgba(0,153,255,0.4);
    background: rgba(0,153,255,0.08);
    color: var(--accent);
  }

  /* Vehicle Grid */
  .vehicle-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 10px;
    padding: 16px 20px;
    max-height: 420px;
    overflow-y: auto;
  }

  .vehicle-grid::-webkit-scrollbar { width: 3px; }
  .vehicle-grid::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
  .vehicle-grid::-webkit-scrollbar-thumb { background: rgba(0,153,255,0.3); border-radius: 2px; }

  .v-card {
    background: var(--card-bg);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: 5px;
    padding: 14px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }

  .v-card::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 3px;
    background: linear-gradient(180deg, var(--accent), var(--accent2));
    opacity: 0;
    transition: opacity 0.2s;
  }

  .v-card:hover {
    background: rgba(0,153,255,0.07);
    border-color: rgba(0,153,255,0.25);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
  }

  .v-card:hover::before { opacity: 1; }

  .v-card.selected {
    background: rgba(0,153,255,0.1);
    border-color: rgba(0,153,255,0.45);
    box-shadow: 0 0 24px rgba(0,153,255,0.12), inset 0 0 24px rgba(0,153,255,0.03);
  }

  .v-card.selected::before { opacity: 1; }

  .v-card.damaged {
    border-color: rgba(255,150,0,0.2);
  }

  .v-card.damaged::before {
    background: linear-gradient(180deg, #ff9900, #ffcc00);
  }

  .v-card-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 10px;
  }

  .v-icon { font-size: 32px; line-height: 1; }

  .v-badges { display: flex; flex-direction: column; gap: 4px; align-items: flex-end; }

  .badge {
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    padding: 2px 7px;
    border-radius: 2px;
  }

  .badge-type {
    background: rgba(0,153,255,0.12);
    border: 1px solid rgba(0,153,255,0.2);
    color: var(--accent);
  }

  .badge-stored {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.35);
  }

  .badge-out {
    background: rgba(0,204,102,0.1);
    border: 1px solid rgba(0,204,102,0.2);
    color: var(--green);
  }

  .badge-damaged {
    background: rgba(255,150,0,0.1);
    border: 1px solid rgba(255,150,0,0.2);
    color: #ff9900;
  }

  .v-name {
    font-size: 15px;
    font-weight: 700;
    color: var(--text);
    letter-spacing: 0.5px;
    margin-bottom: 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .v-plate {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: rgba(255,255,255,0.3);
    letter-spacing: 2px;
    margin-bottom: 10px;
  }

  /* Damage bar */
  .damage-bar-wrap {
    margin-bottom: 10px;
  }

  .damage-bar-label {
    font-size: 10px;
    color: var(--muted);
    display: flex;
    justify-content: space-between;
    margin-bottom: 4px;
  }

  .damage-bar {
    height: 3px;
    background: rgba(255,255,255,0.08);
    border-radius: 2px;
    overflow: hidden;
  }

  .damage-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.4s ease;
  }

  .v-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 10px;
    border-top: 1px solid rgba(255,255,255,0.06);
  }

  .v-payout-label { font-size: 9px; color: var(--muted); letter-spacing: 1px; text-transform: uppercase; margin-bottom: 2px; }
  .v-payout { font-size: 16px; font-weight: 700; color: var(--green); }

  .select-indicator {
    width: 18px; height: 18px;
    border-radius: 3px;
    border: 1px solid rgba(255,255,255,0.15);
    background: transparent;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
    font-size: 10px;
    color: transparent;
  }

  .v-card.selected .select-indicator {
    background: var(--accent);
    border-color: var(--accent);
    color: #fff;
    box-shadow: 0 0 10px rgba(0,153,255,0.5);
  }

  /* Empty state */
  .empty-state {
    grid-column: 1 / -1;
    padding: 60px;
    text-align: center;
    color: var(--muted);
  }

  .empty-icon { font-size: 48px; margin-bottom: 12px; opacity: 0.5; }
  .empty-text { font-size: 14px; letter-spacing: 1px; }

  /* Action bar */
  .action-bar {
    padding: 14px 20px;
    border-top: 1px solid rgba(255,255,255,0.06);
    background: rgba(0,0,0,0.3);
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .selection-summary {
    flex: 1;
  }

  .sel-title { font-size: 13px; color: var(--muted); letter-spacing: 0.5px; margin-bottom: 1px; }
  .sel-name  { font-size: 16px; font-weight: 700; color: var(--text); }

  .action-btns { display: flex; gap: 8px; }

  .btn {
    padding: 10px 22px;
    border-radius: 4px;
    border: none;
    font-family: 'Rajdhani', sans-serif;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
  }

  .btn-secondary {
    background: rgba(255,255,255,0.06);
    color: rgba(255,255,255,0.5);
    border: 1px solid rgba(255,255,255,0.1);
  }

  .btn-secondary:hover:not(:disabled) {
    background: rgba(255,255,255,0.1);
    color: var(--text);
  }

  .btn-scrap {
    background: linear-gradient(135deg, #0066bb, var(--accent));
    color: #fff;
    box-shadow: 0 4px 20px rgba(0,153,255,0.3);
    min-width: 160px;
  }

  .btn-scrap:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 8px 30px rgba(0,153,255,0.45);
  }

  /* Modal */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.75);
    backdrop-filter: blur(6px);
    z-index: 200;
    justify-content: center;
    align-items: center;
  }

  .modal-overlay.active { display: flex; }

  .modal {
    background: rgba(8,12,22,0.99);
    border: 1px solid rgba(0,153,255,0.25);
    border-radius: 6px;
    padding: 32px;
    width: 420px;
    box-shadow: 0 0 80px rgba(0,100,200,0.2), 0 40px 80px rgba(0,0,0,0.8);
    animation: fadeIn 0.2s ease;
    position: relative;
    overflow: hidden;
  }

  .modal::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--accent), transparent);
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to   { opacity: 1; transform: scale(1); }
  }

  .modal-icon { font-size: 36px; margin-bottom: 12px; }
  .modal-title { font-size: 20px; font-weight: 700; color: var(--text); letter-spacing: 2px; margin-bottom: 6px; }
  .modal-sub   { font-size: 13px; color: var(--muted); line-height: 1.6; margin-bottom: 24px; }

  .modal-card {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: 4px;
    padding: 16px;
    margin-bottom: 24px;
  }

  .modal-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    padding: 5px 0;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }

  .modal-row:last-child { border-bottom: none; padding-bottom: 0; }
  .modal-row .lbl { color: var(--muted); }
  .modal-row .val { color: var(--text); font-weight: 700; }
  .modal-row .val.green { color: var(--green); font-size: 17px; }
  .modal-row .val.red   { color: var(--red); }

  .modal-actions { display: flex; gap: 10px; }

  .btn-cancel {
    flex: 1;
    padding: 12px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.5);
  }

  .btn-cancel:hover {
    background: rgba(255,255,255,0.09);
    color: var(--text);
  }

  .btn-destroy {
    flex: 2;
    padding: 12px;
    background: linear-gradient(135deg, #aa0000, var(--red));
    color: #fff;
    box-shadow: 0 4px 20px rgba(200,0,0,0.3);
  }

  .btn-destroy:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 30px rgba(200,0,0,0.45);
  }

  /* Result panel */
  .result-panel {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 300;
    width: 320px;
    background: rgba(8,12,22,0.98);
    border: 1px solid rgba(0,153,255,0.3);
    border-radius: 6px;
    padding: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.7);
    transform: translateX(380px);
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    overflow: hidden;
  }

  .result-panel::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--green), transparent);
  }

  .result-panel.show { transform: translateX(0); }
  .result-panel.error::before { background: linear-gradient(90deg, transparent, var(--red), transparent); }

  .result-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 14px;
  }

  .result-icon { font-size: 22px; }
  .result-title { font-size: 16px; font-weight: 700; color: var(--text); letter-spacing: 1px; }

  .result-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    padding: 6px 0;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }

  .result-item:last-child { border-bottom: none; }
  .result-item .ri-label { color: var(--muted); }
  .result-item .ri-val   { font-weight: 700; color: var(--green); }
  .result-item .ri-val.yellow { color: #ffcc00; }

  /* Notifications demo overlay */
  .demo-controls {
    position: relative;
    z-index: 10;
    margin-top: 20px;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .demo-btn {
    padding: 8px 18px;
    border-radius: 4px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.05);
    color: rgba(255,255,255,0.5);
    font-family: 'Rajdhani', sans-serif;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
  }

  .demo-btn:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: rgba(0,153,255,0.08);
  }

  .demo-btn.danger:hover {
    border-color: var(--red);
    color: var(--red);
    background: rgba(255,51,51,0.08);
  }

  /* Notification badge */
  .notif {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-80px);
    z-index: 400;
    background: rgba(8,12,22,0.98);
    border: 1px solid rgba(0,153,255,0.35);
    border-radius: 6px;
    padding: 12px 24px;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    letter-spacing: 1px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6);
    transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    white-space: nowrap;
  }

  .notif.show { transform: translateX(-50%) translateY(0); }
  .notif .notif-icon { margin-right: 8px; }

  /* Scrollbar global */
  ::-webkit-scrollbar { width: 4px; height: 4px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: rgba(0,153,255,0.3); border-radius: 2px; }
</style>
</head>
<body>

<!-- Notification bar -->
<div class="notif" id="notif"><span class="notif-icon">‚ÑπÔ∏è</span> <span id="notifText"></span></div>

<!-- Title -->
<div class="preview-label">
  <h1>IMMORTAL<span>V</span></h1>
  <p>Schrottplatz System &bull; UI Preview</p>
</div>

<!-- Tabs -->
<div class="preview-tabs">
  <button class="tab-btn active" onclick="switchTab('main')">Hauptmen√º</button>
  <button class="tab-btn" onclick="switchTab('confirm')">Best√§tigung</button>
  <button class="tab-btn" onclick="switchTab('result')">Ergebnis</button>
</div>

<!-- Main Window -->
<div class="window" id="mainWindow">

  <!-- Titlebar -->
  <div class="titlebar">
    <div class="titlebar-dots">
      <div class="dot dot-red"></div>
      <div class="dot dot-yellow"></div>
      <div class="dot dot-green"></div>
    </div>
    <div class="titlebar-title">immortalv_schrottplatz ¬∑ ui</div>
    <div class="titlebar-right"></div>
  </div>

  <!-- Header -->
  <div class="header">
    <div>
      <div class="logo">IMMORTAL<span>V</span></div>
      <div class="logo-sub">Schrottplatz &bull; Fahrzeuge verschrotten</div>
    </div>
    <div class="header-right">
      <div class="header-stat">
        GUTHABEN<strong id="playerMoney">$12,450</strong>
      </div>
      <div class="header-stat">
        AUSZAHLUNG<strong id="totalPayoutHeader" style="color:var(--green)">$0</strong>
      </div>
      <button class="close-btn" onclick="showNotif('‚ùå Men√º w√ºrde geschlossen werden')">‚úï</button>
    </div>
  </div>

  <!-- Stats Row -->
  <div class="stats-row">
    <div class="stat-block">
      <div class="stat-indicator"></div>
      <span class="stat-label">Fahrzeuge gesamt</span>
      <span class="stat-value accent" id="statTotal">6</span>
    </div>
    <div class="stat-block">
      <span class="stat-label">Ausgew√§hlt</span>
      <span class="stat-value" id="statSelected">0</span>
    </div>
    <div class="stat-block">
      <span class="stat-label">Max. Schrottwert</span>
      <span class="stat-value green" id="statMax">$0</span>
    </div>
    <div class="stat-block">
      <span class="stat-label">Schrottrate</span>
      <span class="stat-value" style="color:var(--muted)">15%</span>
    </div>
  </div>

  <!-- Toolbar -->
  <div class="toolbar">
    <div class="search-wrap">
      <span class="search-icon">üîç</span>
      <input class="search-input" type="text" placeholder="Fahrzeug oder Kennzeichen suchen..." id="searchIn" oninput="filterCards()">
    </div>
    <button class="filter-btn active" onclick="setFilter('all', this)">Alle</button>
    <button class="filter-btn" onclick="setFilter('car', this)">Autos</button>
    <button class="filter-btn" onclick="setFilter('motorcycle', this)">Bikes</button>
    <button class="filter-btn" onclick="setFilter('truck', this)">Trucks</button>
  </div>

  <!-- Grid -->
  <div class="vehicle-grid" id="vehicleGrid"></div>

  <!-- Action Bar -->
  <div class="action-bar">
    <div class="selection-summary" id="selSummary">
      <div class="sel-title">Fahrzeug ausw√§hlen</div>
      <div class="sel-name" style="color:var(--muted); font-size:13px">Klicke auf ein Fahrzeug um es zu verschrotten</div>
    </div>
    <div class="action-btns">
      <button class="btn btn-secondary" onclick="deselectAll()">Auswahl aufheben</button>
      <button class="btn btn-scrap" id="scrapBtnMain" onclick="openConfirmModal()" disabled>‚ö° Verschrotten</button>
    </div>
  </div>
</div>

<!-- Demo Controls -->
<div class="demo-controls">
  <button class="demo-btn" onclick="addDemoVehicle()">+ Fahrzeug hinzuf√ºgen</button>
  <button class="demo-btn" onclick="toggleDamaged()">Schaden toggling</button>
  <button class="demo-btn" onclick="showResultToast(true)">‚úÖ Erfolg-Toast</button>
  <button class="demo-btn danger" onclick="showResultToast(false)">‚ùå Fehler-Toast</button>
  <button class="demo-btn" onclick="resetDemo()">üîÑ Reset</button>
</div>

<!-- Confirm Modal -->
<div class="modal-overlay" id="confirmModal">
  <div class="modal">
    <div class="modal-icon">‚ö†Ô∏è</div>
    <div class="modal-title">FAHRZEUG VERSCHROTTEN?</div>
    <div class="modal-sub">Diese Aktion ist unwiderruflich. Das Fahrzeug wird dauerhaft aus deinem Besitz entfernt und du erh√§ltst den Schrottwert ausgezahlt.</div>
    <div class="modal-card" id="confirmDetails"></div>
    <div class="modal-actions">
      <button class="btn btn-cancel" onclick="closeConfirmModal()">Abbrechen</button>
      <button class="btn btn-destroy" onclick="executeScrap()">üóë Ja, verschrotten!</button>
    </div>
  </div>
</div>

<!-- Result Toast -->
<div class="result-panel" id="resultPanel"></div>

<script>
const VEHICLES = [
  { plate:'DO-51668', model:'sultan',   label:'Vulcar Warrener HKR', type:'car',        price:85000,  stored:false,  damage:72, icon:'üöó' },
  { plate:'WL-IVN01', model:'bati',     label:'Pegassi Bati 801',    type:'motorcycle', price:15000,  stored:true,   damage:10, icon:'üèçÔ∏è' },
  { plate:'EN-811TV', model:'zentorno', label:'Pegassi Zentorno',    type:'car',        price:725000, stored:false,  damage:5,  icon:'üöó' },
  { plate:'MU-334KR', model:'pounder',  label:'MTL Pounder',         type:'truck',      price:22000,  stored:true,   damage:88, icon:'üöõ' },
  { plate:'AB-TEST1', model:'bf400',    label:'BF400 Dirtbike',      type:'motorcycle', price:11500,  stored:false,  damage:33, icon:'üèçÔ∏è' },
  { plate:'GTA-VIPP', model:'t20',      label:'Progen T20',          type:'car',        price:2200000,stored:true,   damage:0,  icon:'üöó' },
];

let vehicles = JSON.parse(JSON.stringify(VEHICLES));
let selected = null;
let currentFilter = 'all';
let damageMode = false;

function scrapValue(v) {
  return Math.floor(v.price * 0.15);
}

function fmt(n) {
  return Number(n).toLocaleString('de-DE');
}

function damageColor(d) {
  if (d < 30) return '#00cc66';
  if (d < 60) return '#ffcc00';
  return '#ff5533';
}

function renderGrid() {
  const q = document.getElementById('searchIn').value.toLowerCase();
  const grid = document.getElementById('vehicleGrid');

  let filtered = vehicles.filter(v => {
    const matchType = currentFilter === 'all' || v.type === currentFilter;
    const matchSearch = !q || v.label.toLowerCase().includes(q) || v.plate.toLowerCase().includes(q);
    return matchType && matchSearch;
  });

  document.getElementById('statTotal').textContent = filtered.length;

  if (filtered.length === 0) {
    grid.innerHTML = `<div class="empty-state"><div class="empty-icon">üîß</div><div class="empty-text">Keine Fahrzeuge gefunden</div></div>`;
    return;
  }

  grid.innerHTML = filtered.map(v => {
    const sv = scrapValue(v);
    const isSelected = selected && selected.plate === v.plate;
    const dmgColor = damageColor(v.damage);
    return `
    <div class="v-card ${isSelected ? 'selected' : ''} ${v.damage > 60 ? 'damaged' : ''}" onclick="selectVehicle('${v.plate}')">
      <div class="v-card-top">
        <div class="v-icon">${v.icon}</div>
        <div class="v-badges">
          <span class="badge badge-type">${v.type}</span>
          <span class="badge ${v.stored ? 'badge-stored' : 'badge-out'}">${v.stored ? 'üè† Garage' : '‚úÖ Drau√üen'}</span>
          ${v.damage > 60 ? '<span class="badge badge-damaged">‚ö† Besch√§digt</span>' : ''}
        </div>
      </div>
      <div class="v-name">${v.label}</div>
      <div class="v-plate">${v.plate}</div>
      <div class="damage-bar-wrap">
        <div class="damage-bar-label">
          <span style="color:${dmgColor}">Schaden</span>
          <span style="color:${dmgColor}">${v.damage}%</span>
        </div>
        <div class="damage-bar">
          <div class="damage-fill" style="width:${v.damage}%; background:${dmgColor}"></div>
        </div>
      </div>
      <div class="v-footer">
        <div>
          <div class="v-payout-label">Schrottwert</div>
          <div class="v-payout">$${fmt(sv)}</div>
        </div>
        <div class="select-indicator">${isSelected ? '‚úì' : ''}</div>
      </div>
    </div>`;
  }).join('');

  updateActionBar();
}

function selectVehicle(plate) {
  if (selected && selected.plate === plate) {
    selected = null;
  } else {
    selected = vehicles.find(v => v.plate === plate);
  }
  updateActionBar();
  renderGrid();
}

function updateActionBar() {
  const btn = document.getElementById('scrapBtnMain');
  const sum = document.getElementById('selSummary');
  const totHeader = document.getElementById('totalPayoutHeader');
  const statSel = document.getElementById('statSelected');
  const statMax = document.getElementById('statMax');

  const maxVal = vehicles.reduce((acc, v) => acc + scrapValue(v), 0);
  document.getElementById('statMax').textContent = '$' + fmt(maxVal);

  if (selected) {
    const sv = scrapValue(selected);
    btn.disabled = false;
    sum.innerHTML = `
      <div class="sel-title">Ausgew√§hlt</div>
      <div class="sel-name">${selected.label} <span style="color:var(--muted);font-size:12px;font-family:'JetBrains Mono',monospace;">${selected.plate}</span></div>
    `;
    totHeader.textContent = '$' + fmt(sv);
    statSel.textContent = '1';
  } else {
    btn.disabled = true;
    sum.innerHTML = `<div class="sel-title">Fahrzeug ausw√§hlen</div><div class="sel-name" style="color:var(--muted);font-size:13px">Klicke auf ein Fahrzeug um es zu verschrotten</div>`;
    totHeader.textContent = '$0';
    statSel.textContent = '0';
  }
}

function deselectAll() {
  selected = null;
  renderGrid();
}

function filterCards() { renderGrid(); }

function setFilter(f, btn) {
  currentFilter = f;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderGrid();
}

// Modal
function openConfirmModal() {
  if (!selected) return;
  const v = selected;
  const sv = scrapValue(v);
  const dmgPenalty = Math.floor(sv * (v.damage / 200));
  const finalPay = sv - dmgPenalty;

  document.getElementById('confirmDetails').innerHTML = `
    <div class="modal-row"><span class="lbl">Fahrzeug</span><span class="val">${v.label}</span></div>
    <div class="modal-row"><span class="lbl">Kennzeichen</span><span class="val" style="font-family:'JetBrains Mono',monospace">${v.plate}</span></div>
    <div class="modal-row"><span class="lbl">Schaden</span><span class="val" style="color:${damageColor(v.damage)}">${v.damage}%</span></div>
    <div class="modal-row"><span class="lbl">Basiswert (15%)</span><span class="val">$${fmt(sv)}</span></div>
    ${v.damage > 0 ? `<div class="modal-row"><span class="lbl">Schadensabzug</span><span class="val red">-$${fmt(dmgPenalty)}</span></div>` : ''}
    <div class="modal-row"><span class="lbl">Auszahlung</span><span class="val green">$${fmt(finalPay)}</span></div>
  `;
  document.getElementById('confirmModal').classList.add('active');
  setActiveTab('confirm');
}

function closeConfirmModal() {
  document.getElementById('confirmModal').classList.remove('active');
  setActiveTab('main');
}

function executeScrap() {
  if (!selected) return;
  const v = selected;
  const sv = scrapValue(v);
  const dmgPenalty = Math.floor(sv * (v.damage / 200));
  const finalPay = sv - dmgPenalty;

  // Remove from list
  vehicles = vehicles.filter(x => x.plate !== v.plate);
  const scrapped = v;
  selected = null;
  closeConfirmModal();
  renderGrid();

  // Update money
  const moneyEl = document.getElementById('playerMoney');
  const curMoney = parseInt(moneyEl.textContent.replace(/[^0-9]/g, ''));
  moneyEl.textContent = '$' + fmt(curMoney + finalPay);

  showResultToastData(true, scrapped, finalPay);
  showNotif('‚úÖ ' + scrapped.label + ' wurde verschrottet!');
  setActiveTab('result');
}

function showResultToastData(success, vehicle, payout) {
  const panel = document.getElementById('resultPanel');
  panel.classList.remove('error');

  if (success) {
    const bonusItems = ['Stahl x3', 'Metallteile x5', 'Elektronik x1'];
    panel.innerHTML = `
      <div class="result-header">
        <span class="result-icon">‚úÖ</span>
        <span class="result-title">VERSCHROTTET!</span>
      </div>
      <div class="result-item"><span class="ri-label">Fahrzeug</span><span class="ri-val" style="color:var(--text)">${vehicle.label}</span></div>
      <div class="result-item"><span class="ri-label">üí≥ Bankkonto erhalten</span><span class="ri-val">+$${fmt(payout)}</span></div>
      ${bonusItems.map(i => `<div class="result-item"><span class="ri-label">Bonus-Item</span><span class="ri-val yellow">${i}</span></div>`).join('')}
    `;
  } else {
    panel.classList.add('error');
    panel.innerHTML = `
      <div class="result-header">
        <span class="result-icon">‚ùå</span>
        <span class="result-title">FEHLER</span>
      </div>
      <div class="result-item"><span class="ri-label">Fehler</span><span class="ri-val" style="color:var(--red)">Fahrzeug nicht gefunden!</span></div>
    `;
  }

  panel.classList.add('show');
  setTimeout(() => panel.classList.remove('show'), 5000);
}

function showResultToast(success) {
  showResultToastData(success, { label: 'Vulcar Warrener HKR' }, 12750);
}

function showNotif(text) {
  document.getElementById('notifText').textContent = text;
  const n = document.getElementById('notif');
  n.classList.add('show');
  setTimeout(() => n.classList.remove('show'), 3000);
}

// Only updates the tab button highlight ‚Äî no modal side effects
function setActiveTab(tab) {
  document.querySelectorAll('.tab-btn').forEach((b, i) => {
    b.classList.toggle('active',
      (i === 0 && tab === 'main') ||
      (i === 1 && tab === 'confirm') ||
      (i === 2 && tab === 'result')
    );
  });
}

// Tab buttons call this ‚Äî triggers the appropriate UI
function switchTab(tab) {
  if (tab === 'confirm') {
    if (!selected) { selected = vehicles[0]; renderGrid(); }
    openConfirmModal();
  } else if (tab === 'result') {
    document.getElementById('confirmModal').classList.remove('active');
    setActiveTab('result');
    showResultToastData(true, { label: 'Pegassi Zentorno' }, 108750);
  } else {
    document.getElementById('confirmModal').classList.remove('active');
    setActiveTab('main');
  }
}

// Demo controls
let demoCount = 0;
function addDemoVehicle() {
  demoCount++;
  const models = [
    { label: 'Ocelot Pariah', icon: 'üöó', price: 1420000, type: 'car' },
    { label: 'Western Daemon', icon: 'üèçÔ∏è', price: 8500, type: 'motorcycle' },
    { label: 'HVY Dump',       icon: 'üöõ', price: 30000, type: 'truck' },
  ];
  const m = models[demoCount % models.length];
  vehicles.push({
    plate: 'DEMO-' + demoCount,
    model: 'demo' + demoCount,
    label: m.label,
    type:  m.type,
    price: m.price,
    stored: Math.random() > 0.5,
    damage: Math.floor(Math.random() * 100),
    icon:  m.icon
  });
  renderGrid();
  showNotif('‚ûï ' + m.label + ' hinzugef√ºgt');
}

function toggleDamaged() {
  damageMode = !damageMode;
  vehicles.forEach(v => {
    v.damage = damageMode ? Math.floor(Math.random() * 100) : Math.floor(Math.random() * 30);
  });
  renderGrid();
  showNotif(damageMode ? '‚ö†Ô∏è Zuf√§lliger Schaden aktiviert' : '‚úÖ Schaden zur√ºckgesetzt');
}

function resetDemo() {
  vehicles = JSON.parse(JSON.stringify(VEHICLES));
  selected = null;
  currentFilter = 'all';
  damageMode = false;
  document.getElementById('searchIn').value = '';
  document.getElementById('playerMoney').textContent = '$12,450';
  document.querySelectorAll('.filter-btn').forEach((b, i) => b.classList.toggle('active', i === 0));
  renderGrid();
  showNotif('üîÑ Demo zur√ºckgesetzt');
}

// Init
renderGrid();
</script>
</body>
</html>
