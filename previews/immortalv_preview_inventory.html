<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>ImmortalV â€“ Inventory System v1.0</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --cyan:#00d4ff;--cyan-dk:#0099bb;--cyan-lt:#66e8ff;--cyan-g:rgba(0,212,255,.35);
  --purple:#7c5cbf;--purple-lt:#a07ee0;
  --bg:#060d14;--bg2:#091320;--bg3:#0d1a2c;--bg4:#122030;
  --glass:rgba(9,20,36,.82);--border:rgba(0,212,255,.14);--border2:rgba(0,212,255,.26);
  --text:#c6e8f5;--text2:#8ab8cc;--muted:#3d6e88;
  --green:#00ff87;--orange:#ffaa00;--red:#ff4466;
  --font:'Rajdhani',sans-serif;--mono:'Share Tech Mono',monospace;--orb:'Orbitron',sans-serif;
}
html,body{height:100%;overflow:hidden}
body{
  background:radial-gradient(ellipse 90% 55% at 50% -5%,rgba(0,212,255,.08) 0%,transparent 55%),
             radial-gradient(ellipse 50% 40% at 90% 90%,rgba(124,92,191,.07) 0%,transparent 50%),var(--bg);
  color:var(--text);font-family:var(--font);font-size:14px;
  display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
  padding:14px 12px;
}
#stars{position:fixed;inset:0;pointer-events:none;z-index:0;opacity:.55}
#wrapper{position:relative;z-index:1;width:100%;max-width:1240px;display:flex;flex-direction:column;align-items:center;gap:12px}

/* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.iv-title{font-family:var(--orb);font-size:clamp(20px,3vw,38px);font-weight:900;letter-spacing:6px;
  color:var(--cyan-lt);text-shadow:0 0 30px var(--cyan-g),0 0 60px rgba(0,212,255,.15);
  animation:fadeUp .7s both}
.iv-sub{font-family:var(--font);font-size:13px;font-weight:300;letter-spacing:2px;color:var(--text2);
  margin-top:-4px;animation:fadeUp .7s .1s both}
.demo-badge{
  display:inline-flex;align-items:center;gap:8px;
  background:rgba(0,212,255,.08);border:1px solid var(--border2);border-radius:999px;
  padding:5px 16px;font-size:11px;font-weight:600;letter-spacing:.8px;
  color:var(--cyan-lt);cursor:pointer;transition:all .2s;animation:fadeUp .7s .2s both;
}
.demo-badge:hover{background:rgba(0,212,255,.16);box-shadow:0 0 16px var(--cyan-g)}
@keyframes fadeUp{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:none}}

/* â”€â”€ VIEW SWITCHER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.switcher{display:flex;gap:8px;animation:fadeUp .7s .3s both}
.sw-btn{
  padding:7px 18px;border-radius:999px;border:1px solid var(--border2);
  background:transparent;color:var(--text2);font-family:var(--font);font-size:12px;
  font-weight:600;letter-spacing:.5px;cursor:pointer;transition:all .2s;
  display:flex;align-items:center;gap:6px;
}
.sw-btn:hover{border-color:var(--cyan);color:var(--cyan-lt)}
.sw-btn.active{background:rgba(0,212,255,.14);border-color:var(--cyan);color:var(--cyan-lt);box-shadow:0 0 14px rgba(0,212,255,.18)}
.sw-dot{width:6px;height:6px;border-radius:50%;background:var(--cyan);box-shadow:0 0 5px var(--cyan)}

/* â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.layout{width:100%;display:flex;gap:12px;align-items:flex-start;animation:fadeUp .5s .35s both}

/* â”€â”€ SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sidebar{
  width:230px;flex-shrink:0;
  background:var(--glass);border:1px solid var(--border);border-radius:12px;
  backdrop-filter:blur(16px);overflow:hidden;
  box-shadow:0 8px 32px rgba(0,0,0,.6),inset 0 1px 0 rgba(255,255,255,.04);
}
.sidebar.compact{width:230px}

/* â”€â”€ PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.panel{
  flex:1;min-width:0;
  background:var(--glass);border:1px solid var(--border);border-radius:12px;
  backdrop-filter:blur(16px);overflow:hidden;
  box-shadow:0 8px 32px rgba(0,0,0,.6),inset 0 1px 0 rgba(255,255,255,.04);
}
.panel.hidden,.sidebar.hidden{display:none}

/* â”€â”€ PANEL HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ph{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 16px;border-bottom:1px solid var(--border);
  background:rgba(0,212,255,.025);
}
.ph-title{display:flex;align-items:center;gap:9px;font-family:var(--font);font-size:14px;font-weight:700;letter-spacing:.4px}
.ph-bar{width:3px;height:16px;border-radius:2px;background:var(--cyan);box-shadow:0 0 7px var(--cyan)}
.ph-close{
  background:none;border:1px solid var(--border);color:var(--muted);
  padding:3px 9px;border-radius:5px;font-size:10px;cursor:pointer;
  font-family:var(--font);transition:all .15s;
}
.ph-close:hover{border-color:var(--red);color:var(--red)}

/* â”€â”€ PANEL TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ptabs{display:flex;border-bottom:1px solid var(--border)}
.ptab{
  flex:1;padding:10px;text-align:center;font-size:11px;font-weight:700;
  letter-spacing:.5px;cursor:pointer;color:var(--muted);
  border-bottom:2px solid transparent;transition:all .15s;
  background:none;border-top:none;border-left:none;border-right:none;font-family:var(--font);
}
.ptab:hover{color:var(--text)}
.ptab.active{color:var(--cyan-lt);border-bottom-color:var(--cyan);background:rgba(0,212,255,.04)}

/* â”€â”€ PANEL BODY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.pb{padding:14px;overflow-y:auto;max-height:calc(100vh - 220px)}
.pb::-webkit-scrollbar{width:3px}
.pb::-webkit-scrollbar-thumb{background:var(--cyan-dk);border-radius:2px}
.pb.hidden{display:none}

/* â”€â”€ SIDEBAR PLAYER CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.pc{margin:12px;border:1px solid var(--border);border-radius:9px;overflow:hidden;background:rgba(0,212,255,.025)}
.pc-top{padding:10px 12px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:9px}
.pc-av{width:34px;height:34px;border-radius:50%;background:linear-gradient(135deg,var(--purple),var(--cyan-dk));
  border:2px solid rgba(0,212,255,.3);display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0}
.pc-name{font-family:var(--orb);font-size:11px;font-weight:700;letter-spacing:.5px;color:var(--cyan-lt)}
.pc-id{font-family:var(--mono);font-size:8px;color:var(--muted)}
.pc-stats{padding:9px 12px;display:flex;flex-direction:column;gap:5px}
.pcs-row{display:flex;justify-content:space-between;align-items:center;font-size:10px}
.pcs-val{font-family:var(--mono);font-size:10px;font-weight:600;color:var(--cyan-lt)}
.pcs-bar{height:3px;background:rgba(0,0,0,.3);border-radius:2px;overflow:hidden;margin-top:1px}
.pcs-fill{height:100%;border-radius:2px;transition:width .5s;background:linear-gradient(90deg,var(--cyan-dk),var(--cyan-lt))}
.pcs-fill.warn{background:linear-gradient(90deg,#bb6600,var(--orange))}
.pcs-fill.danger{background:linear-gradient(90deg,#990011,var(--red))}

/* â”€â”€ SIDEBAR UPGRADE PANELS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.upg-section{margin:0 12px 10px;border:1px solid var(--border);border-radius:9px;overflow:hidden}
.upg-hdr{
  padding:6px 10px;background:rgba(0,212,255,.06);border-bottom:1px solid var(--border);
  font-family:var(--mono);font-size:8px;letter-spacing:1.5px;color:var(--cyan-lt);
  display:flex;align-items:center;gap:6px;
}
.upg-grid{display:grid;grid-template-columns:1fr 1fr;gap:4px;padding:7px}
.upg-btn{
  padding:7px 4px;border:1px solid var(--border);border-radius:7px;cursor:pointer;
  transition:all .15s;text-align:center;background:rgba(0,212,255,.02);
}
.upg-btn:hover{border-color:var(--border2);background:rgba(0,212,255,.07)}
.upg-btn.active{border-color:var(--cyan);background:rgba(0,212,255,.14);box-shadow:0 0 8px rgba(0,212,255,.14)}
.upg-num{font-family:var(--orb);font-size:14px;font-weight:700;color:var(--cyan-lt);line-height:1}
.upg-lbl{font-size:8px;color:var(--muted);letter-spacing:.4px;margin-top:1px}
.upg-stat{font-family:var(--mono);font-size:7px;color:var(--text2);margin-top:2px}

/* â”€â”€ NAV BTNS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.nav-sec{padding:10px 12px 8px}
.nav-lbl{font-family:var(--mono);font-size:8px;letter-spacing:2px;color:var(--muted);margin-bottom:6px}
.nav-btn{
  width:100%;background:none;border:1px solid var(--border);color:var(--text2);
  font-family:var(--font);font-size:11px;font-weight:600;letter-spacing:.3px;
  padding:7px 10px;border-radius:7px;cursor:pointer;text-align:left;
  display:flex;align-items:center;gap:8px;transition:all .15s;margin-bottom:4px;
}
.nav-btn:hover{background:rgba(0,212,255,.06);border-color:var(--border2);color:var(--text)}

/* â”€â”€ WEIGHT BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.wbar-wrap{height:2px;background:rgba(0,212,255,.07);margin:-1px 0 12px}
.wbar{height:100%;background:linear-gradient(90deg,var(--cyan-dk),var(--cyan-lt));transition:width .6s}
.wbar.warn{background:linear-gradient(90deg,#bb6600,var(--orange))}
.wbar.danger{background:linear-gradient(90deg,#990011,var(--red))}

/* â”€â”€ CHIPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.chips{display:flex;gap:7px;flex-wrap:wrap}
.chip{background:rgba(0,212,255,.05);border:1px solid var(--border);border-radius:5px;
  padding:4px 9px;font-family:var(--mono);font-size:9px;display:flex;align-items:center;gap:4px}
.ch-lbl{color:var(--muted);font-size:7px;letter-spacing:.5px}
.ch-val{color:var(--text);font-weight:600}
.ch-val.warn{color:var(--orange)}
.ch-val.danger{color:var(--red)}

/* â”€â”€ SECTION SEP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sep{display:flex;align-items:center;gap:9px;margin-bottom:9px;
  font-family:var(--mono);font-size:8px;letter-spacing:2px;color:var(--muted);text-transform:uppercase}
.sep::after{content:'';flex:1;height:1px;background:var(--border)}

/* â”€â”€ INVENTORY GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.inv-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:6px}

/* â”€â”€ SLOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.slot{
  background:rgba(0,212,255,.03);border:1px solid var(--border);border-radius:9px;
  aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  position:relative;cursor:pointer;transition:all .15s;overflow:hidden;min-height:78px;
}
.slot::before{content:'';position:absolute;inset:0;opacity:0;
  background:radial-gradient(circle at 50% 0%,rgba(0,212,255,.13),transparent 70%);transition:opacity .2s}
.slot:hover::before{opacity:1}
.slot:hover{border-color:var(--border2);transform:translateY(-1px);box-shadow:0 4px 14px rgba(0,0,0,.4)}
.slot.empty{opacity:.16;cursor:default}
.slot.empty:hover{transform:none;border-color:var(--border)}
.slot.empty::before{display:none}
.slot-icon{font-size:24px;line-height:1;margin-bottom:2px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.5))}
.slot-lbl{font-size:8px;color:var(--text2);text-align:center;padding:0 3px;
  overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}
.slot-amt{position:absolute;bottom:3px;right:4px;font-family:var(--mono);font-size:8px;
  font-weight:700;color:#fff;background:rgba(0,0,0,.6);padding:1px 3px;border-radius:2px}
.slot-wg{position:absolute;top:3px;left:4px;font-family:var(--mono);font-size:7px;color:var(--muted)}
.slot-qbar{position:absolute;bottom:0;left:0;right:0;height:3px;background:rgba(0,0,0,.4)}
.slot-qfill{height:100%;border-radius:0 0 9px 9px;transition:width .3s}
.slot-qdot{position:absolute;top:3px;right:4px;width:6px;height:6px;border-radius:50%;border:1px solid rgba(0,0,0,.4)}
.slot-spoiled::after{content:'â˜ ';position:absolute;inset:0;display:flex;align-items:center;
  justify-content:center;font-size:19px;background:rgba(0,0,0,.72);border-radius:9px}

/* â”€â”€ STORAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.stor-cols{display:grid;grid-template-columns:1fr 1fr;gap:9px}
.stor-pane{display:flex;flex-direction:column;background:rgba(0,212,255,.02);
  border:1px solid var(--border);border-radius:9px;overflow:hidden}
.stor-hdr{display:flex;align-items:center;gap:7px;padding:8px 12px;border-bottom:1px solid var(--border);
  background:rgba(0,212,255,.03);flex-shrink:0}
.stor-icon{font-size:15px}
.stor-title{font-family:var(--font);font-size:12px;font-weight:700;letter-spacing:.3px;flex:1}
.stor-stats{font-family:var(--mono);font-size:8px;color:var(--muted)}
.stor-badge{font-size:7px;padding:2px 6px;border-radius:999px;font-weight:700;letter-spacing:.3px;font-family:var(--mono)}
.stor-badge.fridge{background:rgba(0,212,255,.1);color:var(--cyan-lt);border:1px solid var(--border2)}
.stor-badge.freezer{background:rgba(160,200,255,.08);color:#a0d0ff;border:1px solid rgba(160,200,255,.2)}
.stor-badge.trunk{background:rgba(124,92,191,.1);color:var(--purple-lt);border:1px solid rgba(124,92,191,.25)}
.stor-badge.normal{background:rgba(200,200,200,.07);color:var(--text2);border:1px solid var(--border)}
.stor-grid{padding:8px;overflow-y:auto;display:grid;grid-template-columns:repeat(auto-fill,minmax(68px,1fr));gap:5px;align-content:start;min-height:80px}
.stor-locked{display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:20px;color:var(--muted);font-size:11px;gap:6px;text-align:center}
.stor-locked-icon{font-size:26px;opacity:.4}

/* â”€â”€ DECAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.di-box{background:rgba(0,212,255,.04);border:1px solid var(--border);border-left:3px solid var(--cyan);
  border-radius:7px;padding:11px 13px;margin-bottom:13px}
.di-box p{font-size:11px;color:var(--text2);line-height:1.7;margin-bottom:3px}
.di-box code{font-family:var(--mono);font-size:9px;background:rgba(0,212,255,.1);padding:1px 4px;border-radius:3px;color:var(--cyan-lt)}
.sim-card{background:rgba(0,212,255,.03);border:1px solid var(--border);border-radius:9px;overflow:hidden;margin-bottom:13px}
.sim-hdr{padding:9px 13px;background:rgba(0,212,255,.05);border-bottom:1px solid var(--border);
  font-family:var(--font);font-size:12px;font-weight:700;letter-spacing:.3px;display:flex;align-items:center;gap:7px}
.sim-body{padding:13px;display:grid;grid-template-columns:1fr 1fr;gap:13px}
.sim-f label{font-size:8px;color:var(--muted);letter-spacing:.5px;text-transform:uppercase;font-family:var(--mono);display:block;margin-bottom:4px}
.sim-f select,.sim-f input[type=range]{
  width:100%;background:var(--bg3);border:1px solid var(--border);color:var(--text);
  padding:6px 9px;border-radius:7px;font-family:var(--font);font-size:11px;outline:none;transition:border-color .15s}
.sim-f select:focus{border-color:var(--cyan-dk)}
.sim-res{background:var(--bg3);border:1px solid var(--border);border-radius:7px;
  padding:13px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:9px}
.q-circ{width:84px;height:84px;border-radius:50%;display:flex;flex-direction:column;
  align-items:center;justify-content:center;border:3px solid;transition:all .4s}
.qc-v{font-family:var(--orb);font-size:22px;font-weight:700;line-height:1}
.qc-l{font-size:8px;letter-spacing:.5px;margin-top:2px;font-weight:600}
.q-bar-v{width:100%;background:rgba(0,0,0,.3);height:5px;border-radius:3px;overflow:hidden}
.qbv-f{height:100%;border-radius:3px;transition:width .4s,background .4s}
.sim-sum{font-family:var(--mono);font-size:9px;color:var(--text2)}

/* â”€â”€ TEBEX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tb-store{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:14px}
.tb-cat{background:rgba(0,212,255,.03);border:1px solid var(--border);border-radius:10px;overflow:hidden}
.tb-cat-hdr{padding:10px 14px;border-bottom:1px solid var(--border);background:rgba(0,212,255,.05);
  font-family:var(--font);font-size:13px;font-weight:700;letter-spacing:.3px;
  display:flex;align-items:center;gap:8px}
.tb-cat-icon{font-size:18px}
.tb-cat-sub{font-size:9px;color:var(--muted);font-weight:400;letter-spacing:.3px;display:block;margin-top:1px}
.tb-pkg{padding:9px 14px;border-bottom:1px solid rgba(255,255,255,.03);cursor:pointer;
  display:flex;align-items:center;justify-content:space-between;transition:background .13s}
.tb-pkg:last-child{border-bottom:none}
.tb-pkg:hover{background:rgba(0,212,255,.06)}
.tb-pkg.active{background:rgba(0,212,255,.12)}
.tb-pkg-info{flex:1}
.tb-pkg-name{font-size:12px;font-weight:700;letter-spacing:.2px}
.tb-pkg-desc{font-size:9px;color:var(--text2);margin-top:1px;font-family:var(--mono)}
.tb-pkg-price{font-family:var(--orb);font-size:12px;font-weight:700;color:var(--cyan-lt);white-space:nowrap;margin-left:10px}
.tb-pkg-check{color:var(--green);font-size:13px;margin-left:6px}
.tb-buy-btn{
  width:calc(100% - 28px);margin:8px 14px 10px;padding:9px;
  background:linear-gradient(135deg,rgba(0,212,255,.15),rgba(0,212,255,.07));
  border:1px solid var(--cyan-dk);border-radius:8px;
  color:var(--cyan-lt);font-family:var(--orb);font-size:10px;font-weight:700;
  letter-spacing:1.5px;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:7px;
}
.tb-buy-btn:hover{background:linear-gradient(135deg,rgba(0,212,255,.26),rgba(0,212,255,.14));box-shadow:0 0 18px rgba(0,212,255,.25);transform:translateY(-1px)}
.tb-buy-btn:active{transform:none}

.tb-log{background:rgba(0,212,255,.02);border:1px solid var(--border);border-radius:9px;overflow:hidden}
.tb-log-hdr{padding:9px 13px;background:rgba(0,0,0,.2);border-bottom:1px solid var(--border);
  font-family:var(--font);font-size:12px;font-weight:700;letter-spacing:.3px;display:flex;align-items:center;gap:7px}
.tb-log-body{max-height:160px;overflow-y:auto}
.tb-log-body::-webkit-scrollbar{width:3px}
.tb-log-body::-webkit-scrollbar-thumb{background:var(--cyan-dk)}
.tl-row{padding:6px 12px;border-bottom:1px solid rgba(255,255,255,.03);
  display:flex;align-items:center;gap:9px;font-family:var(--mono);font-size:9px;transition:background .1s}
.tl-row:hover{background:rgba(0,212,255,.03)}
.tl-dot{width:5px;height:5px;border-radius:50%;flex-shrink:0}
.tl-dot.ok{background:var(--green);box-shadow:0 0 4px var(--green)}
.tl-dot.dup{background:var(--orange);box-shadow:0 0 4px var(--orange)}
.tl-txn{color:var(--text2);flex:1;overflow:hidden;text-overflow:ellipsis}
.tl-pkg{color:var(--cyan-lt);background:rgba(0,212,255,.1);padding:1px 6px;border-radius:9px;font-size:8px;white-space:nowrap}
.tl-ts{color:var(--muted)}

/* â”€â”€ CONTEXT MENU â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#ctx{position:fixed;z-index:5000;background:var(--bg3);border:1px solid var(--border2);
  border-top:2px solid var(--cyan);border-radius:9px;min-width:168px;
  box-shadow:0 10px 36px rgba(0,0,0,.9),0 0 20px rgba(0,212,255,.12);
  overflow:hidden;opacity:0;transform:scale(.95) translateY(-4px);
  transition:opacity .12s,transform .12s;pointer-events:none}
#ctx.on{opacity:1;transform:scale(1) translateY(0);pointer-events:all}
.ctx-head{padding:7px 12px;background:rgba(0,212,255,.06);border-bottom:1px solid var(--border);
  font-size:11px;font-weight:700;color:var(--text);display:flex;align-items:center;gap:7px}
.ctx-row{padding:8px 12px;font-size:11px;cursor:pointer;display:flex;align-items:center;gap:8px;
  transition:background .1s;border-bottom:1px solid rgba(255,255,255,.02)}
.ctx-row:last-child{border:none}
.ctx-row:hover{background:rgba(0,212,255,.1);color:var(--cyan-lt)}
.ctx-row.danger:hover{background:rgba(255,68,102,.1);color:var(--red)}
.ctx-ri{width:15px;text-align:center;font-size:11px}
.ctx-sep{height:1px;background:var(--border);margin:2px 0}
.ctx-qrow{padding:5px 12px;font-size:9px;color:var(--text2);display:flex;align-items:center;gap:6px;background:rgba(0,0,0,.18);font-family:var(--mono)}

/* â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#modal-bg{position:fixed;inset:0;z-index:6000;background:rgba(0,0,0,.6);backdrop-filter:blur(6px);
  display:none;align-items:center;justify-content:center}
#modal-bg.on{display:flex}
.modal{background:var(--bg3);border:1px solid var(--border2);border-top:2px solid var(--cyan);
  border-radius:11px;padding:20px 22px;min-width:270px;
  box-shadow:0 0 36px rgba(0,212,255,.14),0 20px 56px rgba(0,0,0,.9);
  animation:popIn .2s cubic-bezier(.4,0,.2,1)}
@keyframes popIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:none}}
.modal-title{font-family:var(--orb);font-size:12px;font-weight:700;letter-spacing:.5px;
  color:var(--cyan-lt);margin-bottom:14px;display:flex;align-items:center;gap:7px}
.modal input{width:100%;background:rgba(0,212,255,.05);border:1px solid var(--border);
  color:var(--text);padding:8px 11px;border-radius:7px;font-family:var(--mono);font-size:15px;
  text-align:center;outline:none;transition:border-color .15s;margin-bottom:14px}
.modal input:focus{border-color:var(--cyan-dk)}
.modal-acts{display:flex;gap:9px}
.btn-ok{flex:1;padding:8px;background:rgba(0,212,255,.14);border:1px solid var(--cyan-dk);
  border-radius:7px;color:var(--cyan-lt);font-family:var(--orb);font-size:9px;font-weight:700;
  letter-spacing:1px;cursor:pointer;transition:all .15s}
.btn-ok:hover{background:rgba(0,212,255,.24);box-shadow:0 0 10px rgba(0,212,255,.18)}
.btn-no{flex:1;padding:8px;background:none;border:1px solid var(--border);border-radius:7px;
  color:var(--muted);font-family:var(--font);font-size:11px;cursor:pointer;transition:all .15s}
.btn-no:hover{border-color:var(--red);color:var(--red)}

/* â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#toasts{position:fixed;top:12px;right:12px;z-index:9999;display:flex;flex-direction:column;gap:6px;pointer-events:none}
.toast{background:var(--bg3);border:1px solid var(--border);border-radius:7px;
  padding:9px 13px;min-width:230px;max-width:290px;
  box-shadow:0 6px 20px rgba(0,0,0,.8);display:flex;gap:8px;align-items:flex-start;
  animation:tIn .2s ease both;pointer-events:all}
.toast.out{animation:tOut .2s ease forwards}
.t-bar{width:3px;border-radius:2px;align-self:stretch;flex-shrink:0}
.toast.success .t-bar{background:var(--green)} .toast.success .t-ttl{color:var(--green)}
.toast.error   .t-bar{background:var(--red)}   .toast.error   .t-ttl{color:var(--red)}
.toast.info    .t-bar{background:var(--cyan)}   .toast.info    .t-ttl{color:var(--cyan-lt)}
.toast.warning .t-bar{background:var(--orange)} .toast.warning .t-ttl{color:var(--orange)}
.t-ttl{font-family:var(--orb);font-size:9px;font-weight:700;letter-spacing:.5px;margin-bottom:1px}
.t-msg{font-size:10px;color:var(--text2);line-height:1.4}
@keyframes tIn{from{opacity:0;transform:translateX(18px)}to{opacity:1;transform:none}}
@keyframes tOut{from{opacity:1}to{opacity:0;transform:translateX(18px)}}
::-webkit-scrollbar{width:3px}::-webkit-scrollbar-thumb{background:var(--cyan-dk);border-radius:2px}
</style>
</head>
<body>
<canvas id="stars"></canvas>
<div id="toasts"></div>
<div id="modal-bg">
  <div class="modal">
    <div class="modal-title">ğŸ“¦ <span id="modal-lbl">Menge</span></div>
    <input type="number" id="modal-in" min="1" value="1" onkeydown="if(event.key==='Enter')mOk()"/>
    <div class="modal-acts">
      <button class="btn-ok" onclick="mOk()">BestÃ¤tigen</button>
      <button class="btn-no" onclick="mCancel()">Abbrechen</button>
    </div>
  </div>
</div>
<div id="ctx">
  <div class="ctx-head"><span id="ctx-icon">ğŸ“¦</span><span id="ctx-name">â€“</span></div>
  <div id="ctx-rows"></div>
</div>

<div id="wrapper">
  <div class="iv-title">IMMORTAL V</div>
  <div class="iv-sub">Inventory System v1.0</div>
  <div class="demo-badge" onclick="toast('Demo','Rechtsklick auf Items fÃ¼r Aktionen!','info')">âœ¦ VollstÃ¤ndig Interaktive Demo â€“ Alles testen!</div>

  <div class="switcher">
    <button class="sw-btn active" id="vb-inv"     onclick="V('inv')"><div class="sw-dot"></div>Inventar</button>
    <button class="sw-btn"        id="vb-storage" onclick="V('storage')">ğŸ“¦ Storage</button>
    <button class="sw-btn"        id="vb-decay"   onclick="V('decay')">â³ Decay</button>
    <button class="sw-btn"        id="vb-tebex"   onclick="V('tebex')">ğŸ’³ Tebex</button>
  </div>

  <div class="layout" id="layout">

    <!-- â”€â”€ SIDEBAR â”€â”€ -->
    <div class="sidebar" id="sidebar">

      <div class="pc">
        <div class="pc-top">
          <div class="pc-av">ğŸ˜ˆ</div>
          <div><div class="pc-name">ENGELS811</div><div class="pc-id">license:abc12345def</div></div>
        </div>
        <div class="pc-stats">
          <div class="pcs-row"><span>Slots</span><span class="pcs-val" id="pc-slots">0/30</span></div>
          <div class="pcs-bar"><div class="pcs-fill" id="pc-slots-bar" style="width:0%"></div></div>
          <div class="pcs-row" style="margin-top:4px"><span>Gewicht</span><span class="pcs-val" id="pc-wg">0/500.0 kg</span></div>
          <div class="pcs-bar"><div class="pcs-fill" id="pc-wg-bar" style="width:0%"></div></div>
        </div>
      </div>

      <!-- Inventar-Upgrade -->
      <div class="upg-section">
        <div class="upg-hdr">ğŸ’ INVENTAR-ERWEITERUNG</div>
        <div class="upg-grid" id="upg-inv-grid">
          <div class="upg-btn active" onclick="applyUpg('inv',0)"><div class="upg-num">â€“</div><div class="upg-lbl">BASIS</div><div class="upg-stat">30 Slots Â· 500kg</div></div>
          <div class="upg-btn"       onclick="applyUpg('inv',1)"><div class="upg-num">1</div><div class="upg-lbl">SMALL</div><div class="upg-stat">+10 Slots +100kg</div></div>
          <div class="upg-btn"       onclick="applyUpg('inv',2)"><div class="upg-num">2</div><div class="upg-lbl">MEDIUM</div><div class="upg-stat">+25 Slots +250kg</div></div>
          <div class="upg-btn"       onclick="applyUpg('inv',3)"><div class="upg-num">3</div><div class="upg-lbl">LARGE</div><div class="upg-stat">+50 Slots +500kg</div></div>
        </div>
      </div>

      <!-- KÃ¼hlschrank-Upgrade -->
      <div class="upg-section">
        <div class="upg-hdr">ğŸ§Š KÃœHLSCHRANK</div>
        <div class="upg-grid" id="upg-fridge-grid">
          <div class="upg-btn active" onclick="applyUpg('fridge',0)"><div class="upg-num">â€“</div><div class="upg-lbl">KEINER</div><div class="upg-stat">gesperrt</div></div>
          <div class="upg-btn"       onclick="applyUpg('fridge',1)"><div class="upg-num">S</div><div class="upg-lbl">KLEIN</div><div class="upg-stat">20 Slots</div></div>
          <div class="upg-btn"       onclick="applyUpg('fridge',2)"><div class="upg-num">M</div><div class="upg-lbl">MITTEL</div><div class="upg-stat">40 Slots</div></div>
          <div class="upg-btn"       onclick="applyUpg('fridge',3)"><div class="upg-num">L</div><div class="upg-lbl">GROSS</div><div class="upg-stat">60 Slots</div></div>
        </div>
      </div>

      <!-- Kofferraum-Upgrade -->
      <div class="upg-section">
        <div class="upg-hdr">ğŸš— KOFFERRAUM</div>
        <div class="upg-grid" id="upg-trunk-grid">
          <div class="upg-btn active" onclick="applyUpg('trunk',0)"><div class="upg-num">â€“</div><div class="upg-lbl">BASIS</div><div class="upg-stat">20 Slots 100kg</div></div>
          <div class="upg-btn"       onclick="applyUpg('trunk',1)"><div class="upg-num">1</div><div class="upg-lbl">SMALL</div><div class="upg-stat">+15 Slots +150kg</div></div>
          <div class="upg-btn"       onclick="applyUpg('trunk',2)"><div class="upg-num">2</div><div class="upg-lbl">MEDIUM</div><div class="upg-stat">+30 Slots +300kg</div></div>
          <div class="upg-btn"       onclick="applyUpg('trunk',3)"><div class="upg-num">3</div><div class="upg-lbl">LARGE</div><div class="upg-stat">+50 Slots +500kg</div></div>
        </div>
      </div>

      <div class="nav-sec">
        <div class="nav-lbl">Test-Aktionen</div>
        <button class="nav-btn" onclick="addRand()">â• ZufÃ¤lliges Item</button>
        <button class="nav-btn" onclick="clearInv()">ğŸ—‘ Inventar leeren</button>
        <button class="nav-btn" onclick="V('tebex')">ğŸ’³ Tebex Shop Ã¶ffnen</button>
      </div>
    </div>

    <!-- â”€â”€ INVENTAR VIEW â”€â”€ -->
    <div class="panel" id="view-inv">
      <div class="ph">
        <div class="ph-title"><div class="ph-bar"></div>Spieler-Inventar</div>
        <div class="chips">
          <div class="chip"><span class="ch-lbl">SLOTS</span><span class="ch-val" id="chip-slots">0/30</span></div>
          <div class="chip"><span class="ch-lbl">GEWICHT</span><span class="ch-val" id="chip-wg">0/500.0 kg</span></div>
        </div>
        <button class="ph-close" onclick="toast('Geschlossen','Inventar geschlossen.','info')">âœ• SchlieÃŸen</button>
      </div>
      <div class="wbar-wrap"><div class="wbar" id="main-wbar" style="width:0%"></div></div>
      <div class="pb">
        <div class="sep">Items</div>
        <div class="inv-grid" id="inv-grid"></div>
      </div>
    </div>

    <!-- â”€â”€ STORAGE VIEW â”€â”€ -->
    <div class="panel hidden" id="view-storage">
      <div class="ph"><div class="ph-title"><div class="ph-bar"></div>Storage System</div></div>
      <div class="pb" style="max-height:calc(100vh - 205px)">
        <div class="stor-cols">

          <!-- Inventar mini -->
          <div class="stor-pane">
            <div class="stor-hdr"><div class="stor-icon">ğŸ’</div><div class="stor-title">Inventar</div><div class="stor-badge normal">Ã—1.0</div></div>
            <div class="stor-grid" id="sp-inv"></div>
          </div>

          <!-- KÃ¼hlschrank -->
          <div class="stor-pane">
            <div class="stor-hdr"><div class="stor-icon">ğŸ§Š</div><div class="stor-title">KÃ¼hlschrank</div><div class="stor-stats" id="sp-fridge-stats">â€“</div><div class="stor-badge fridge">Ã—0.5</div></div>
            <div id="sp-fridge-wrap"></div>
          </div>

          <!-- Gefrierbox -->
          <div class="stor-pane">
            <div class="stor-hdr"><div class="stor-icon">â„ï¸</div><div class="stor-title">Gefrierbox</div><div class="stor-stats" id="sp-freezer-stats">0/30</div><div class="stor-badge freezer">Ã—0.0</div></div>
            <div class="stor-grid" id="sp-freezer"></div>
          </div>

          <!-- Kofferraum -->
          <div class="stor-pane">
            <div class="stor-hdr"><div class="stor-icon">ğŸš—</div><div class="stor-title">Kofferraum</div><div class="stor-stats" id="sp-trunk-stats">â€“</div><div class="stor-badge trunk">Ã—1.2</div></div>
            <div id="sp-trunk-wrap"></div>
          </div>

        </div>
      </div>
    </div>

    <!-- â”€â”€ DECAY VIEW â”€â”€ -->
    <div class="panel hidden" id="view-decay">
      <div class="ph"><div class="ph-title"><div class="ph-bar"></div>Decay Engine</div></div>
      <div class="pb">
        <div class="di-box">
          <p>Verfall wird <code>lazy</code> berechnet â€“ nur beim Zugriff, kein dauerhafter Thread.</p>
          <p>Formel: <code>newQ = 100 âˆ’ (base_decay Ã— modifier Ã— hoursElapsed)</code></p>
          <p>Modifier: <code>normal=1.0</code> Â· <code>fridge=0.5</code> Â· <code>freezer=0.0</code> Â· <code>vehicle=1.2</code></p>
        </div>
        <div class="sim-card">
          <div class="sim-hdr">â± Decay Simulator</div>
          <div class="sim-body">
            <div style="display:flex;flex-direction:column;gap:9px">
              <div class="sim-f"><label>Item</label>
                <select id="sim-item" onchange="uSim()">
                  <option value="bread">ğŸ Brot (4%/h)</option>
                  <option value="water">ğŸ’§ Wasser (0.5%/h)</option>
                  <option value="burger">ğŸ” Burger (8%/h)</option>
                  <option value="pizza">ğŸ• Pizza (6%/h)</option>
                  <option value="salad">ğŸ¥— Salat (12%/h)</option>
                  <option value="milk">ğŸ¥› Milch (5%/h)</option>
                  <option value="raw_meat">ğŸ¥© Rohes Fleisch (15%/h)</option>
                </select>
              </div>
              <div class="sim-f"><label>Storage Typ</label>
                <select id="sim-mod" onchange="uSim()">
                  <option value="1.0">normal (Ã—1.0)</option>
                  <option value="0.5">fridge (Ã—0.5)</option>
                  <option value="0.0">freezer (Ã—0.0)</option>
                  <option value="1.2">vehicle (Ã—1.2)</option>
                </select>
              </div>
              <div class="sim-f"><label>Stunden: <span id="sim-hv" style="color:var(--cyan-lt);font-family:var(--mono)">6h</span></label>
                <input type="range" id="sim-h" min="0" max="48" value="6" oninput="uSim()"/>
              </div>
            </div>
            <div class="sim-res">
              <div class="q-circ" id="sim-c"><div class="qc-v" id="sim-qv">100</div><div class="qc-l" id="sim-ql">Frisch</div></div>
              <div style="width:100%"><div class="q-bar-v"><div class="qbv-f" id="sim-qb" style="width:100%"></div></div></div>
              <div class="sim-sum" id="sim-sum">â€“</div>
            </div>
          </div>
        </div>
        <div class="sep">Alle Items Â· 24h-Ãœbersicht</div>
        <div style="background:rgba(0,212,255,.02);border:1px solid var(--border);border-radius:9px;overflow:hidden">
          <table style="width:100%;border-collapse:collapse;font-size:10px">
            <thead><tr style="background:rgba(0,212,255,.05);border-bottom:1px solid var(--border)">
              <th style="padding:8px 11px;text-align:left;font-family:var(--mono);font-size:7px;letter-spacing:1.5px;color:var(--muted)">ITEM</th>
              <th style="padding:8px 11px;text-align:center;font-family:var(--mono);font-size:7px;color:var(--muted)">%/H</th>
              <th style="padding:8px 11px;text-align:center;font-family:var(--mono);font-size:7px;color:var(--muted)">NORMAL</th>
              <th style="padding:8px 11px;text-align:center;font-family:var(--mono);font-size:7px;color:var(--muted)">FRIDGE</th>
              <th style="padding:8px 11px;text-align:center;font-family:var(--mono);font-size:7px;color:var(--muted)">FREEZER</th>
              <th style="padding:8px 11px;text-align:center;font-family:var(--mono);font-size:7px;color:var(--muted)">VEHICLE</th>
            </tr></thead>
            <tbody id="decay-tbody"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- â”€â”€ TEBEX VIEW â”€â”€ -->
    <div class="panel hidden" id="view-tebex">
      <div class="ph"><div class="ph-title"><div class="ph-bar"></div>Tebex Shop â€“ Upgrades</div></div>
      <div class="pb" style="max-height:calc(100vh - 205px)">

        <!-- 3 Shop-Kategorien -->
        <div class="tb-store" id="tb-store-grid">

          <!-- Inventar -->
          <div class="tb-cat" id="tbcat-inv">
            <div class="tb-cat-hdr"><div class="tb-cat-icon">ğŸ’</div><div><div>Inventar-Erweiterung</div><span class="tb-cat-sub">Mehr Slots & Gewicht</span></div></div>
            <div class="tb-pkg" data-cat="inv" data-lv="0" onclick="tbSelect('inv',0)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Basis</div><div class="tb-pkg-desc">30 Slots Â· 500 kg</div></div>
              <div class="tb-pkg-price">Gratis</div><div class="tb-pkg-check" id="tb-inv-0-chk">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="inv" data-lv="1" onclick="tbSelect('inv',1)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Small</div><div class="tb-pkg-desc">+10 Slots Â· +100 kg</div></div>
              <div class="tb-pkg-price">4,99 â‚¬</div><div class="tb-pkg-check" id="tb-inv-1-chk" style="opacity:0">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="inv" data-lv="2" onclick="tbSelect('inv',2)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Medium</div><div class="tb-pkg-desc">+25 Slots Â· +250 kg</div></div>
              <div class="tb-pkg-price">9,99 â‚¬</div><div class="tb-pkg-check" id="tb-inv-2-chk" style="opacity:0">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="inv" data-lv="3" onclick="tbSelect('inv',3)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Large</div><div class="tb-pkg-desc">+50 Slots Â· +500 kg</div></div>
              <div class="tb-pkg-price">14,99 â‚¬</div><div class="tb-pkg-check" id="tb-inv-3-chk" style="opacity:0">âœ“</div>
            </div>
            <button class="tb-buy-btn" onclick="tbBuy('inv')">ğŸ’³ Upgrade kaufen</button>
          </div>

          <!-- KÃ¼hlschrank -->
          <div class="tb-cat" id="tbcat-fridge">
            <div class="tb-cat-hdr"><div class="tb-cat-icon">ğŸ§Š</div><div><div>KÃ¼hlschrank</div><span class="tb-cat-sub">Verfall Ã—0.5 Modifier</span></div></div>
            <div class="tb-pkg" data-cat="fridge" data-lv="0" onclick="tbSelect('fridge',0)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Kein KÃ¼hlschrank</div><div class="tb-pkg-desc">Gesperrt</div></div>
              <div class="tb-pkg-price">â€“</div><div class="tb-pkg-check" id="tb-fridge-0-chk">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="fridge" data-lv="1" onclick="tbSelect('fridge',1)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Klein</div><div class="tb-pkg-desc">20 Slots Â· Ã—0.5 Decay</div></div>
              <div class="tb-pkg-price">6,99 â‚¬</div><div class="tb-pkg-check" id="tb-fridge-1-chk" style="opacity:0">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="fridge" data-lv="2" onclick="tbSelect('fridge',2)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Mittel</div><div class="tb-pkg-desc">40 Slots Â· Ã—0.5 Decay</div></div>
              <div class="tb-pkg-price">11,99 â‚¬</div><div class="tb-pkg-check" id="tb-fridge-2-chk" style="opacity:0">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="fridge" data-lv="3" onclick="tbSelect('fridge',3)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">GroÃŸ</div><div class="tb-pkg-desc">60 Slots Â· Ã—0.5 Decay</div></div>
              <div class="tb-pkg-price">17,99 â‚¬</div><div class="tb-pkg-check" id="tb-fridge-3-chk" style="opacity:0">âœ“</div>
            </div>
            <button class="tb-buy-btn" onclick="tbBuy('fridge')">ğŸ’³ Upgrade kaufen</button>
          </div>

          <!-- Kofferraum -->
          <div class="tb-cat" id="tbcat-trunk">
            <div class="tb-cat-hdr"><div class="tb-cat-icon">ğŸš—</div><div><div>Kofferraum</div><span class="tb-cat-sub">Fahrzeug-Storage erweitern</span></div></div>
            <div class="tb-pkg" data-cat="trunk" data-lv="0" onclick="tbSelect('trunk',0)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Standard</div><div class="tb-pkg-desc">20 Slots Â· 100 kg</div></div>
              <div class="tb-pkg-price">Gratis</div><div class="tb-pkg-check" id="tb-trunk-0-chk">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="trunk" data-lv="1" onclick="tbSelect('trunk',1)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Small</div><div class="tb-pkg-desc">+15 Slots Â· +150 kg</div></div>
              <div class="tb-pkg-price">4,99 â‚¬</div><div class="tb-pkg-check" id="tb-trunk-1-chk" style="opacity:0">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="trunk" data-lv="2" onclick="tbSelect('trunk',2)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Medium</div><div class="tb-pkg-desc">+30 Slots Â· +300 kg</div></div>
              <div class="tb-pkg-price">8,99 â‚¬</div><div class="tb-pkg-check" id="tb-trunk-2-chk" style="opacity:0">âœ“</div>
            </div>
            <div class="tb-pkg" data-cat="trunk" data-lv="3" onclick="tbSelect('trunk',3)">
              <div class="tb-pkg-info"><div class="tb-pkg-name">Large</div><div class="tb-pkg-desc">+50 Slots Â· +500 kg</div></div>
              <div class="tb-pkg-price">12,99 â‚¬</div><div class="tb-pkg-check" id="tb-trunk-3-chk" style="opacity:0">âœ“</div>
            </div>
            <button class="tb-buy-btn" onclick="tbBuy('trunk')">ğŸ’³ Upgrade kaufen</button>
          </div>

        </div>

        <!-- Transaktions-Log -->
        <div class="tb-log">
          <div class="tb-log-hdr">ğŸ“‹ Transaktions-Log <span style="font-size:8px;color:var(--muted);font-weight:400;margin-left:8px">Echtzeit-Simulation</span></div>
          <div class="tb-log-body" id="tb-log-body"></div>
        </div>

      </div>
    </div>

  </div><!-- /layout -->
</div><!-- /wrapper -->

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ImmortalV Inventory v4 â€“ Full Logic
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ STARS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(()=>{
  const c=document.getElementById('stars'),ctx=c.getContext('2d');let S=[];
  const r=()=>{c.width=innerWidth;c.height=innerHeight};
  const init=()=>{r();S=[];for(let i=0;i<100;i++)S.push({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*1.4+.2,a:Math.random(),da:(Math.random()-.5)*.007,vx:(Math.random()-.5)*.12,vy:(Math.random()-.5)*.12})};
  const draw=()=>{ctx.clearRect(0,0,c.width,c.height);for(const s of S){s.x+=s.vx;s.y+=s.vy;s.a+=s.da;if(s.a<0||s.a>1)s.da*=-1;if(s.x<0)s.x=c.width;if(s.x>c.width)s.x=0;if(s.y<0)s.y=c.height;if(s.y>c.height)s.y=0;ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fillStyle=`rgba(${s.r>1?'0,212,255':'160,220,240'},${s.a*.75})`;ctx.fill()}requestAnimationFrame(draw)};
  window.addEventListener('resize',init);init();draw();
})();

/* â”€â”€ CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const BASE_SLOTS  = 30;
const BASE_WEIGHT = 500000; // gramm = 500.00 kg

const CFG_INV = {
  0:{eS:0,  eW:0,      label:'Basis',  slots:30, kg:500},
  1:{eS:10, eW:100000, label:'Small',  slots:40, kg:600},
  2:{eS:25, eW:250000, label:'Medium', slots:55, kg:750},
  3:{eS:50, eW:500000, label:'Large',  slots:80, kg:1000},
};
const CFG_FRIDGE = {
  0:{slots:0,  label:'Kein KÃ¼hlschrank'},
  1:{slots:20, label:'Klein (20 Slots)'},
  2:{slots:40, label:'Mittel (40 Slots)'},
  3:{slots:60, label:'GroÃŸ (60 Slots)'},
};
const CFG_TRUNK = {
  0:{eS:0,  eW:0,      label:'Standard', slots:20, kg:100},
  1:{eS:15, eW:150000, label:'Small',    slots:35, kg:250},
  2:{eS:30, eW:300000, label:'Medium',   slots:50, kg:400},
  3:{eS:50, eW:500000, label:'Large',    slots:70, kg:600},
};

let invLv=0, fridgeLv=0, trunkLv=0;
const maxInvSlots  = ()=> BASE_SLOTS  + CFG_INV[invLv].eS;
const maxInvWeight = ()=> BASE_WEIGHT + CFG_INV[invLv].eW;
const maxFridgeSlots= ()=> CFG_FRIDGE[fridgeLv].slots;
const maxTrunkSlots = ()=> 20 + CFG_TRUNK[trunkLv].eS;
const maxTrunkWeight= ()=> 100000 + CFG_TRUNK[trunkLv].eW;

/* â”€â”€ TEBEX SELECTED (pending purchase) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let tbPending = {inv:0, fridge:0, trunk:0};

/* â”€â”€ ITEM DEFS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const DEFS={
  bread:      {l:'Brot',           icon:'ğŸ',w:500,  usable:true, food:true, decay:4.0},
  water:      {l:'Wasser',         icon:'ğŸ’§',w:330,  usable:true, food:true, decay:0.5},
  burger:     {l:'Burger',         icon:'ğŸ”',w:350,  usable:true, food:true, decay:8.0},
  pizza:      {l:'Pizza',          icon:'ğŸ•',w:600,  usable:true, food:true, decay:6.0},
  salad:      {l:'Salat',          icon:'ğŸ¥—',w:300,  usable:true, food:true, decay:12.0},
  milk:       {l:'Milch',          icon:'ğŸ¥›',w:1000, usable:true, food:true, decay:5.0},
  raw_meat:   {l:'Rohes Fleisch',  icon:'ğŸ¥©',w:800,  usable:false,food:true, decay:15.0},
  cooked_meat:{l:'Gebrat. Fleisch',icon:'ğŸ–',w:700,  usable:true, food:true, decay:7.0},
  lockpick:   {l:'Dietrich',       icon:'ğŸ”‘',w:200,  usable:true, food:false,decay:0},
  phone:      {l:'Handy',          icon:'ğŸ“±',w:300,  usable:true, food:false,decay:0},
  bandage:    {l:'Verband',        icon:'ğŸ©¹',w:100,  usable:true, food:false,decay:0},
  money:      {l:'Bargeld',        icon:'ğŸ’µ',w:0,    usable:false,food:false,decay:0},
};

let playerItems=[], fridgeItems=[], freezerItems=[], trunkItems=[];
let tebexLog=[], mCb=null;

/* â”€â”€ QUALITY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const QI=q=>{
  if(q>=90)return{l:'Frisch',    c:'#00ff87'};
  if(q>=70)return{l:'Gut',       c:'#27ae60'};
  if(q>=50)return{l:'Akzeptabel',c:'#ffaa00'};
  if(q>=25)return{l:'Schlecht',  c:'#e67e22'};
  if(q> 0 )return{l:'Fast weg',  c:'#e74c3c'};
  return          {l:'Verdorben', c:'#7f0000'};
};
const decayQ=(name,hrs,mod)=>{
  const d=DEFS[name];if(!d||!d.food)return null;
  if(mod===0)return 100;
  return Math.max(0,Math.min(100,100-d.decay*mod*hrs));
};
const mkItem=(name,opts={})=>{
  const hrs=opts.hrs!==undefined?opts.hrs:Math.random()*12;
  const mod=opts.mod!==undefined?opts.mod:1.0;
  return{id:Math.floor(Math.random()*9e5+1e5),name,
    amount:opts.amt||(DEFS[name]?.w===0?Math.ceil(Math.random()*2000+500):1),
    quality:decayQ(name,hrs,mod),storageType:opts.st||'normal'};
};

/* â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
playerItems=[
  mkItem('bread',{hrs:2}),mkItem('burger',{hrs:8}),mkItem('water',{hrs:1,amt:3}),
  mkItem('lockpick',{hrs:0,amt:5}),mkItem('phone',{hrs:0}),mkItem('bandage',{hrs:0,amt:2}),
  mkItem('salad',{hrs:10}),mkItem('pizza',{hrs:18}),mkItem('milk',{hrs:5}),
  mkItem('raw_meat',{hrs:7}),mkItem('cooked_meat',{hrs:14}),mkItem('money',{hrs:0}),
];
fridgeItems=[mkItem('bread',{hrs:6,mod:.5,st:'fridge'}),mkItem('milk',{hrs:24,mod:.5,st:'fridge'}),mkItem('salad',{hrs:3,mod:.5,st:'fridge'})];
freezerItems=[mkItem('raw_meat',{hrs:100,mod:0,st:'freezer'}),mkItem('burger',{hrs:200,mod:0,st:'freezer'})];
trunkItems=[mkItem('lockpick',{hrs:0,amt:3}),mkItem('bandage',{hrs:0,amt:4})];

/* â”€â”€ RENDER SLOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const rSlot=(item,owner,sid)=>{
  if(!item)return`<div class="slot empty"><div class="slot-icon" style="opacity:.18;font-size:16px">â–¡</div></div>`;
  const d=DEFS[item.name]||{};
  const q=item.quality;const qi=q!==null&&q!==undefined?QI(q):null;
  const spoiled=q!==null&&q!==undefined&&q<=0;
  const wg=d.w?(d.w*item.amount/1000).toFixed(2)+'kg':'';
  return`<div class="slot${spoiled?' slot-spoiled':''}" data-id="${item.id}"
    oncontextmenu="showCtx(event,${item.id},'${owner}','${sid||''}')"
    onclick="showCtx(event,${item.id},'${owner}','${sid||''}')">
    ${wg?`<div class="slot-wg">${wg}</div>`:''}
    <div class="slot-icon">${d.icon||'ğŸ“¦'}</div>
    <div class="slot-lbl">${d.l||item.name}</div>
    ${item.amount>1?`<div class="slot-amt">Ã—${item.amount}</div>`:''}
    ${qi?`<div class="slot-qdot" style="background:${qi.c}"></div>`:''}
    ${q!==null&&q!==undefined?`<div class="slot-qbar"><div class="slot-qfill" style="width:${Math.round(q)}%;background:${qi.c}"></div></div>`:''}
  </div>`;
};

const rGrid=(el,items,max,owner,sid)=>{
  let h=items.map(i=>rSlot(i,owner,sid)).join('');
  for(let i=0;i<max-items.length;i++)h+=rSlot(null);
  el.innerHTML=h;
};

/* â”€â”€ STATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function uStats(){
  const mS=maxInvSlots(),mW=maxInvWeight();
  const uS=playerItems.length;
  const uW=playerItems.reduce((s,i)=>{const d=DEFS[i.name];return s+(d?d.w*i.amount:0)},0);
  const sp=Math.min(100,(uS/mS)*100);
  const wp=Math.min(100,(uW/mW)*100);
  const wkgStr=`${(uW/1000).toFixed(2)} / ${(mW/1000).toFixed(2)} kg`;
  const slStr=`${uS}/${mS}`;
  document.getElementById('pc-slots').textContent=slStr;
  document.getElementById('pc-wg').textContent=wkgStr;
  document.getElementById('pc-slots-bar').style.width=sp+'%';
  const wb=document.getElementById('pc-wg-bar');wb.style.width=wp+'%';
  wb.className='pcs-fill'+(wp>=90?' danger':wp>=70?' warn':'');
  document.getElementById('chip-slots').textContent=slStr;
  const cw=document.getElementById('chip-wg');cw.textContent=wkgStr;
  cw.className='ch-val'+(wp>=90?' danger':wp>=70?' warn':'');
  const mw=document.getElementById('main-wbar');mw.style.width=wp+'%';
  mw.className='wbar'+(wp>=90?' danger':wp>=70?' warn':'');
}

/* â”€â”€ RENDER STORAGE LOCKED/OPEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function uStorageViews(){
  // Fridge
  const fw=document.getElementById('sp-fridge-wrap');
  const fs=maxFridgeSlots();
  if(fs===0){
    fw.innerHTML=`<div class="stor-locked"><div class="stor-locked-icon">ğŸ”’</div><div>KÃ¼hlschrank nicht freigeschaltet.<br><span style="color:var(--cyan-lt);cursor:pointer" onclick="V('tebex')">Im Tebex Shop kaufen â†’</span></div></div>`;
    document.getElementById('sp-fridge-stats').textContent='gesperrt';
  } else {
    let g=fw.querySelector('.stor-grid');if(!g){fw.innerHTML='<div class="stor-grid" id="sp-fridge"></div>';g=fw.querySelector('.stor-grid');}
    rGrid(g,fridgeItems,fs,'storage','fridge');
    document.getElementById('sp-fridge-stats').textContent=fridgeItems.length+'/'+fs;
  }
  // Trunk
  const tw=document.getElementById('sp-trunk-wrap');
  const ts=maxTrunkSlots();
  let tg=tw.querySelector('.stor-grid');if(!tg){tw.innerHTML='<div class="stor-grid" id="sp-trunk"></div>';tg=tw.querySelector('.stor-grid');}
  rGrid(tg,trunkItems,ts,'storage','trunk');
  document.getElementById('sp-trunk-stats').textContent=trunkItems.length+'/'+ts+' Â· '+(maxTrunkWeight()/1000).toFixed(0)+'kg';
}

/* â”€â”€ RENDER ALL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function rAll(){
  const mS=maxInvSlots();
  rGrid(document.getElementById('inv-grid'),playerItems,mS,'player','');
  rGrid(document.getElementById('sp-inv'),playerItems,Math.min(mS,12),'player','');
  rGrid(document.getElementById('sp-freezer'),freezerItems,30,'storage','freezer');
  document.getElementById('sp-freezer-stats').textContent=freezerItems.length+'/30';
  uStorageViews();
  uStats();
}

/* â”€â”€ VIEW SWITCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function V(v){
  ['inv','storage','decay','tebex'].forEach(n=>{
    document.getElementById('view-'+n).classList.toggle('hidden',n!==v);
    document.getElementById('vb-'+n).classList.toggle('active',n===v);
  });
  const hideSide=v==='decay'||v==='tebex';
  document.getElementById('sidebar').classList.toggle('hidden',hideSide);
  if(v==='decay'){uSim();rDecayTable();}
  if(v==='tebex'){rTbLog();uTbHighlight();}
}

/* â”€â”€ UPGRADE APPLY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function applyUpg(cat,lv){
  if(cat==='inv')  invLv=lv;
  if(cat==='fridge')fridgeLv=lv;
  if(cat==='trunk')trunkLv=lv;
  document.querySelectorAll(`#upg-${cat}-grid .upg-btn`).forEach((b,i)=>b.classList.toggle('active',i===lv));
  const labels={inv:CFG_INV,fridge:CFG_FRIDGE,trunk:CFG_TRUNK};
  toast('Upgrade',''+labels[cat][lv].label+' angewendet.','success');
  rAll();
  uTbHighlight();
}

/* â”€â”€ TEBEX SHOP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function tbSelect(cat,lv){
  tbPending[cat]=lv;
  document.querySelectorAll(`[data-cat="${cat}"]`).forEach(el=>el.classList.toggle('active',parseInt(el.dataset.lv)===lv));
  uTbHighlight();
}
function uTbHighlight(){
  // Checkmarks zeigen aktuell gekauftes Level
  ['inv','fridge','trunk'].forEach(cat=>{
    const cur=cat==='inv'?invLv:cat==='fridge'?fridgeLv:trunkLv;
    for(let i=0;i<=3;i++){
      const el=document.getElementById(`tb-${cat}-${i}-chk`);
      if(el)el.style.opacity=i===cur?'1':'0';
    }
  });
}
function tbBuy(cat){
  const lv=tbPending[cat];
  const cur=cat==='inv'?invLv:cat==='fridge'?fridgeLv:trunkLv;
  if(lv===cur){toast('Bereits aktiv','Dieses Upgrade ist schon aktiv.','warning');return;}
  if(lv===0&&cur>0){toast('Downgrade','Upgrades kÃ¶nnen nicht zurÃ¼ckgestuft werden.','error');return;}
  if(lv<cur){toast('Downgrade','Upgrades kÃ¶nnen nicht zurÃ¼ckgestuft werden.','error');return;}
  // Simulate purchase
  const txn='TXN-'+Math.random().toString(36).substring(2,10).toUpperCase();
  const isDup=tebexLog.some(t=>t.cat===cat&&t.lv===lv&&Math.random()<.05);
  const labels={inv:['Basis','Small','Medium','Large'],fridge:['Kein','Klein','Mittel','GroÃŸ'],trunk:['Standard','Small','Medium','Large']};
  const catLabel={inv:'Inventar',fridge:'KÃ¼hlschrank',trunk:'Kofferraum'};
  const entry={txn,cat,lv,label:`${catLabel[cat]} â€“ ${labels[cat][lv]}`,ts:new Date().toLocaleTimeString('de-DE',{hour:'2-digit',minute:'2-digit'}),status:isDup?'dup':'ok'};
  tebexLog.unshift(entry);if(tebexLog.length>15)tebexLog.pop();
  rTbLog();
  if(!isDup){
    applyUpg(cat,lv);
    toast('Kauf erfolgreich!',`${catLabel[cat]}: ${labels[cat][lv]} freigeschaltet.`,'success');
  } else {
    toast('Duplikat!',txn+' bereits verarbeitet.','warning');
  }
}
function rTbLog(){
  const b=document.getElementById('tb-log-body');
  b.innerHTML=tebexLog.map(e=>`
    <div class="tl-row">
      <div class="tl-dot ${e.status}"></div>
      <div class="tl-txn">${e.txn}</div>
      <div class="tl-pkg">${e.label}</div>
      <div>${e.status==='ok'?`<span style="color:var(--green)">âœ“</span>`:`<span style="color:var(--orange)">âš  DUP</span>`}</div>
      <div class="tl-ts">${e.ts}</div>
    </div>`).join('')||'<div style="padding:16px;text-align:center;color:var(--muted);font-size:10px;font-family:var(--mono)">Noch keine KÃ¤ufe â€“ wÃ¤hle ein Upgrade oben.</div>';
}

/* â”€â”€ ADD / CLEAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function addRand(){
  if(playerItems.length>=maxInvSlots()){toast('Voll','Inventar ist voll!','error');return;}
  const k=Object.keys(DEFS);const n=k[Math.floor(Math.random()*k.length)];
  playerItems.push(mkItem(n,{hrs:Math.random()*18}));
  toast('Item',DEFS[n].l+' hinzugefÃ¼gt.','info');rAll();
}
function clearInv(){playerItems=[];toast('Geleert','Inventar geleert.','warning');rAll();}

/* â”€â”€ CONTEXT MENU â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function getArr(owner,sid){
  if(owner==='player')return playerItems;
  if(sid==='fridge')return fridgeItems;
  if(sid==='freezer')return freezerItems;
  if(sid==='trunk')return trunkItems;
  return[];
}
function showCtx(e,id,owner,sid){
  e.preventDefault();e.stopPropagation();
  const arr=getArr(owner,sid);
  const item=arr.find(i=>i.id===id);if(!item)return;
  const d=DEFS[item.name]||{};
  const q=item.quality;const qi=q!==null&&q!==undefined?QI(q):null;
  const spoiled=q!==null&&q!==undefined&&q<=0;
  document.getElementById('ctx-icon').textContent=d.icon||'ğŸ“¦';
  document.getElementById('ctx-name').textContent=d.l||item.name;
  const rows=document.getElementById('ctx-rows');rows.innerHTML='';
  const add=(icon,txt,cls,fn)=>{
    const div=document.createElement('div');div.className='ctx-row '+(cls||'');
    div.innerHTML=`<span class="ctx-ri">${icon}</span>${txt}`;
    div.onclick=()=>{hideCtx();fn();};rows.appendChild(div);
  };
  if(qi){
    const qr=document.createElement('div');qr.className='ctx-qrow';
    qr.innerHTML=`<span style="width:6px;height:6px;border-radius:50%;background:${qi.c};display:inline-block;flex-shrink:0"></span>QualitÃ¤t: <b style="color:${qi.c};margin-left:3px">${qi.l}</b><span style="margin-left:auto">${Math.round(q||0)}%</span>`;
    rows.appendChild(qr);
    const sep=document.createElement('div');sep.className='ctx-sep';rows.appendChild(sep);
  }
  if(d.usable&&owner==='player'){
    if(!spoiled)add('â–¶','Benutzen','',()=>useItem(id));
    else add('â˜ ','Verdorben â€“ gesperrt','danger',()=>toast('Verdorben','Item ist verdorben!','error'));
  }
  if(owner==='player'){
    if(fridgeLv>0) add('ğŸ§Š','In KÃ¼hlschrank','',()=>askAmt('In KÃ¼hlschrank',item.amount,a=>moveStorage(id,'fridge',a)));
    else add('ğŸ§Š','KÃ¼hlschrank (gesperrt)','danger',()=>{hideCtx();V('tebex');toast('Tipp','Kaufe einen KÃ¼hlschrank auf Tebex!','warning')});
    add('â„ï¸','In Gefrierbox','',()=>askAmt('In Gefrierbox',item.amount,a=>moveStorage(id,'freezer',a)));
    add('ğŸš—','In Kofferraum','',()=>askAmt('In Kofferraum',item.amount,a=>moveStorage(id,'trunk',a)));
    add('ğŸ¤','Weitergeben','',()=>toast('Info','Im echten Server: Spieler-ID wÃ¤hlen.','info'));
    const sep=document.createElement('div');sep.className='ctx-sep';rows.appendChild(sep);
    add('ğŸ—‘','Wegwerfen','danger',()=>askAmt('Wegwerfen',item.amount,a=>dropItem(id,a)));
  }
  if(owner==='storage'){
    add('â¬…','Ins Inventar','',()=>{
      if(playerItems.length>=maxInvSlots()){toast('Voll','Inventar ist voll!','error');return;}
      const a=getArr(owner,sid);const idx=a.findIndex(i=>i.id===id);if(idx===-1)return;
      const it=a.splice(idx,1)[0];it.storageType='normal';playerItems.push(it);
      toast('Entnommen',(DEFS[it.name]?.l||it.name)+' ins Inventar.','success');rAll();
    });
  }
  const menu=document.getElementById('ctx');
  menu.style.left=Math.min(e.clientX,innerWidth-185)+'px';
  menu.style.top=Math.min(e.clientY,innerHeight-rows.children.length*35-55)+'px';
  menu.classList.add('on');
  setTimeout(()=>document.addEventListener('click',hideCtx,{once:true}),50);
}
function hideCtx(){document.getElementById('ctx').classList.remove('on')}

/* â”€â”€ ITEM ACTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function useItem(id){
  const idx=playerItems.findIndex(i=>i.id===id);if(idx===-1)return;
  const it=playerItems[idx];it.amount--;if(it.amount<=0)playerItems.splice(idx,1);
  toast('Benutzt','1Ã— '+(DEFS[it.name]?.l||it.name)+' benutzt.','success');rAll();
}
function dropItem(id,amt){
  const idx=playerItems.findIndex(i=>i.id===id);if(idx===-1)return;
  const it=playerItems[idx];it.amount-=amt;if(it.amount<=0)playerItems.splice(idx,1);
  toast('Weggeworfen',amt+'Ã— '+(DEFS[it.name]?.l||it.name),'warning');rAll();
}
function moveStorage(id,target,amt){
  const idx=playerItems.findIndex(i=>i.id===id);if(idx===-1)return;
  const arr=target==='fridge'?fridgeItems:target==='freezer'?freezerItems:trunkItems;
  const mxS=target==='fridge'?maxFridgeSlots():target==='trunk'?maxTrunkSlots():30;
  if(arr.length>=mxS){toast('Voll','Storage ist voll!','error');return;}
  const it=playerItems[idx];it.amount-=amt;if(it.amount<=0)playerItems.splice(idx,1);
  const clone={...it,id:Math.floor(Math.random()*9e5+1e5),amount:amt,storageType:target};
  arr.push(clone);
  const lbl={fridge:'KÃ¼hlschrank',freezer:'Gefrierbox',trunk:'Kofferraum'}[target];
  toast('Eingelagert',amt+'Ã— '+(DEFS[it.name]?.l||it.name)+' â†’ '+lbl,'success');
  rAll();V('storage');
}

/* â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function askAmt(lbl,max,cb){
  document.getElementById('modal-lbl').textContent=lbl;
  const inp=document.getElementById('modal-in');inp.max=max;inp.value=1;
  document.getElementById('modal-bg').classList.add('on');
  mCb=cb;setTimeout(()=>{inp.focus();inp.select()},50);
}
function mOk(){
  const a=Math.max(1,Math.floor(parseFloat(document.getElementById('modal-in').value)||1));
  document.getElementById('modal-bg').classList.remove('on');
  if(mCb){mCb(a);mCb=null;}
}
function mCancel(){document.getElementById('modal-bg').classList.remove('on');mCb=null;}
document.getElementById('modal-bg').onclick=e=>{if(e.target===e.currentTarget)mCancel();}

/* â”€â”€ DECAY SIMULATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function uSim(){
  const name=document.getElementById('sim-item').value;
  const mod=parseFloat(document.getElementById('sim-mod').value);
  const hrs=parseFloat(document.getElementById('sim-h').value);
  document.getElementById('sim-hv').textContent=hrs+'h';
  const d=DEFS[name];
  const q=mod===0?100:Math.max(0,Math.min(100,100-d.decay*mod*hrs));
  const qi=QI(q);
  const c=document.getElementById('sim-c');
  c.style.borderColor=qi.c;c.style.boxShadow=`0 0 18px ${qi.c}55`;c.style.background=qi.c+'11';
  document.getElementById('sim-qv').textContent=Math.round(q);
  document.getElementById('sim-qv').style.color=qi.c;
  document.getElementById('sim-ql').textContent=qi.l;
  document.getElementById('sim-ql').style.color=qi.c;
  document.getElementById('sim-qb').style.cssText=`width:${Math.round(q)}%;background:${qi.c}`;
  const mn={1.0:'normal',0.5:'fridge',0.0:'freezer',1.2:'vehicle'};
  document.getElementById('sim-sum').textContent=`${d.l} Â· ${hrs}h Â· ${mn[mod]||mod+'Ã—'} Â· âˆ’${(d.decay*mod*hrs).toFixed(1)}%`;
}
function rDecayTable(){
  const tb=document.getElementById('decay-tbody');
  const foods=Object.entries(DEFS).filter(([,v])=>v.food&&v.decay>0);
  tb.innerHTML=foods.map(([n,d])=>{
    const cols=[1.0,0.5,0.0,1.2].map(m=>{
      const q=m===0?100:Math.max(0,100-d.decay*m*24);
      const qi=QI(q);
      const hrs=m===0?'âˆ':Math.ceil(100/(d.decay*m))+'h';
      return`<td style="text-align:center;padding:7px 10px;border-bottom:1px solid rgba(255,255,255,.03)"><span style="font-family:var(--mono);font-size:10px;color:${qi.c}">${Math.round(q)}%</span><div style="font-size:7px;color:var(--muted)">${hrs}</div></td>`;
    }).join('');
    return`<tr><td style="padding:7px 11px;border-bottom:1px solid rgba(255,255,255,.03)"><div style="display:flex;align-items:center;gap:7px">${d.icon}<div><div style="font-weight:700;font-size:11px">${d.l}</div><div style="font-family:var(--mono);font-size:7px;color:var(--muted)">${d.decay}%/h</div></div></div></td>${cols}</tr>`;
  }).join('');
}

/* â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function toast(title,msg,type='info'){
  const c=document.getElementById('toasts');
  const t=document.createElement('div');t.className='toast '+type;
  t.innerHTML=`<div class="t-bar"></div><div><div class="t-ttl">${title}</div><div class="t-msg">${msg}</div></div>`;
  c.appendChild(t);
  setTimeout(()=>{t.classList.add('out');setTimeout(()=>t.remove(),220)},3200);
}

/* â”€â”€ KEYBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.addEventListener('keydown',e=>{
  if(e.key==='Escape'){hideCtx();mCancel();}
  if(e.key==='Enter'&&document.getElementById('modal-bg').classList.contains('on'))mOk();
});

/* â”€â”€ BOOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
rAll();uSim();uTbHighlight();
// init pending = current level
tbPending={inv:0,fridge:0,trunk:0};
toast('ImmortalV','Inventory System v1.0 â€“ Demo aktiv!','success');
</script>
</body>
</html>